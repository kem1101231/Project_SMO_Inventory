<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    {%load staticfiles%}
    <title>Create Request</title>

    <!-- BOOTSTRAP STYLES-->
    <link href="{% static 'assets/css/bootstrap.css' %}" rel="stylesheet" />
    <!-- FONTAWESOME STYLES-->
    <link href="{% static 'assets/css/font-awesome.css' %}" rel="stylesheet" />
    <!--CUSTOM BASIC STYLES-->
    <link href="{% static 'assets/css/basic.css' %}" rel="stylesheet" />
    <link href="{% static 'assets/css/navbar-requi.css' %}" rel="stylesheet" />
    <!--CUSTOM MAIN STYLES-->
    <link href="{% static 'assets/css/custom.css' %}" rel="stylesheet" />
    <!-- GOOGLE FONTS-->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
    
    <link rel="stylesheet" href="{% static 'assets/plugins/Font-Awesome/css/font-awesome.css' %}" />

    <link rel="shortcut icon" href="{% static 'assets/img/Msu.ico' %}" type="image/x-icon" /> 

    <style type="text/css">
        .fontStyle{
            mso-bidi-font-size:11.0pt;
                     line-height:107%;
                     font-family:&quot;Times New Roman&quot;,serif;
        mso-fareast-font-family:&quot;Times New Roman&quot;">
        }
    </style>
</head>
<body>
    <div id="wrapper">
        <!-- /. NAV TOP  -->
        <nav class="navbar navbar-default navbar-inverse navbar-fixed-top navbar-cls-top" role="navigation" style="margin-bottom: 0">
           
           <div  class="navbar-header navbar-brand"></div>

            <ul class="nav navbar-right top-nav" 
                        style="
                        margin-right: 50px;
                        ">

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        
                        {% if taskNum.0.0 != 0 %}
                            <span class="label label-danger">{{taskNum.0.0}}</span> 
                        {% endif %}
                    
                    <i class="icon-tasks"></i><b class="caret"></b></a>
                    <ul class="dropdown-menu message-dropdown">
                    
                    <li class="message-preview">
                            
                            <a style="padding-bottom:5px; height: 35px; padding-top: 10px;">
                                
                                <div class="media">
                                    
                                          
                                    <div class="media-body " style="margin-left:95px;">
                                        <h5 class="media-heading">
                                            <strong>Tasks</strong>
                                        </h5>
                                        
                                    </div>
                                </div>
                                
                            </a>
                        </li>


                    {% if taskNum.0.0 == 0 %}

                        <li class="message-preview" >
                            
                                <a>
                                <div class="media" >
                                    <span class="pull-left" >
                                        <div class="btn btn-info btn-circle" role="button" aria-disabled="true" disabled = "disabled">
                                        <i class="icon-info"></i></div>
                                    </span>  
                                    <div class="media-body">
                                        <h5 class="media-heading">
                                            <strong>No task to process at the moment</strong>
                                        </h5>
                                    </div>
                                </div>
                            </a>
                            
                        </li>

                    {% endif %}    
                    
                    {% for x in taskDetails %}
                        
                        <li class="message-preview">
                            

                            <a>
                                
                                <div class="media">
                                    
                                        <span class="pull-left" >
                                        <div class="btn btn-{{x.2}} btn-circle" role="button" aria-disabled="true" disabled = "disabled">
                                        <i class="{{x.1}}"></i></div>
                                    </span>  
                                    <div class="media-body">
                                        <h5 class="media-heading">
                                            <strong>{{x.5}}</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p style="margin-bottom:5px;">It was for the request with:</p> 
                                        <p style="margin-bottom:5px;">{{x.3}}</p>      
                                        <p>{{x.4}}</p>
                                    </div>
                                    <form action="/requisitioner/notifs/" method="post">{% csrf_token %}
                                    <div class="media-body" style="float: right;">
                                        <button class="btn btn-xs btn-info" type="submit" name="d" value="{{x.0}}">View Details</button>    
                                    </div>
                                    </form>

                                </div>
                                
                            </a>
                        </li>

                     {% endfor %}   


                    </ul>
                </li>    
                
                <li class="dropdown">

                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">

                        {% if notifNum.0.0 != 0 %}
                            <span class="label label-danger">{{notifNum.0.0}}</span> 
                        {% endif %}
                    
                    <i class="icon-bell"></i><b class="caret"></b></a>
                    
                    <ul class="dropdown-menu message-dropdown">
                        
                        <li class="message-preview">
                            
                            <a style="padding-bottom:5px; height: 35px; padding-top: 10px;">
                                
                                <div class="media">
                                    
                                          
                                    <div class="media-body" style="margin-left:75px;">
                                        <h5 class="media-heading">
                                            <strong>Notifications</strong>
                                        </h5>
                                        
                                    </div>
                                </div>
                                
                            </a>
                        </li>

                        {% if notifNum.0.0 == 0 %}

                        <li class="message-preview" >
                            
                                <a>
                                <div class="media" >
                                    <span class="pull-left" >
                                        <div class="btn btn-info btn-circle" role="button" aria-disabled="true" disabled = "disabled">
                                        <i class="icon-info"></i></div>
                                    </span>  
                                    <div class="media-body">
                                        <h5 class="media-heading">
                                            <strong>No unread notification at the moment</strong>
                                        </h5>
                                    </div>
                                </div>
                            </a>
                            
                        </li>

                    {% endif %}

                       {% for x in notifDetails %}

                       <li class="message-preview" >
                            
                                <a>
                                <div class="media" >
                                    <span class="pull-left" >
                                        <div class="btn btn-{{x.2}} btn-circle" role="button" aria-disabled="true" disabled = "disabled">
                                        <i class="{{x.1}}"></i></div>
                                    </span>  
                                    <div class="media-body">
                                        <h5 class="media-heading">
                                            <strong>{{x.5}}</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p style="margin-bottom:5px;">{{x.3}}</p>      
                                        <p>{{x.4}}</p>
                                    </div>
                                    <form action="/requisitioner/notifs/" method="post">{% csrf_token %}
                                    <div class="media-body" style="float: right;">
                                        <button class="btn btn-xs btn-info" type="submit" name="d" value="{{x.0}}">View Details</button>    
                                    </div>
                                    </form>
                                </div>
                            </a>
                            
                        </li>
                       
                       {% endfor %}
                        

                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle"  data-toggle="dropdown"><i class="icon-user"></i><b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="/requisitioner/profile/"><i class="fa fa-fw fa-user"></i> Profile</a>
                        </li>
                        <li>
                            <a href="/requisitioner/pr/"><i class="fa fa-fw fa-shopping-cart"></i> My Requests</a>
                        </li>
                        <li>
                            <a href="/requisitioner/accounts/"><i class="fa fa-fw fa-th-list"></i> My Acct. Items</a>
                        </li>
                        
                        <li class="divider"></li>
                        <li>
                            <a href="/login"><i class="fa-fw icon-signout"></i> Log Out</a>
                        </li>
                    </ul>
                </li>
            </ul>
             <div class="navbar-default navbar-side" style="margin-top: 50px;" role="navigation">
              <div class="sidebar-collapse"> 
                <ul class="nav" id="main-menu">
                    <li style="
                         height: 140px;
                        ">
                        {%load staticfiles%}
                        <div class="user-img-div">

                            <a href="/requisitioner/profile/"><img src="{% static 'assets/img/user.jpeg' %}" class="img-circle" /></a>

                            <div class="inner-text">
              <p></p>
                                <a href="/requisitioner/profile/" class = "inner-text">{{lname}}, {{fname}}</a>
                            <br />
                                <small>{{dept}} - {{designation}}</small>
                
                              
              </div>
                        </div>

                    </li>

                    <li>
                        <a  href="/requisitioner"><i class="fa fa-home "></i>Home</a>
                    </li>
          <li>
                        <a href="/requisitioner/profile/"><i class="fa fa-user "></i>Profile </a>
                        
                    </li>
                    <li>
                        <a  href="#"><i class="fa fa-shopping-cart "></i>Purcahse Requests<span class="fa arrow"></span></a>
                         <ul class="nav nav-second-level collapse in">
                            <li>
                                <a class="active-menu-requi" href="/requisitioner/create_pr/"><i class="icon-edit"></i>Create Request</a>
                            </li>
                            <li>
                                <a href="/requisitioner/pr/"><i class="fa fa-reorder "></i>Manage Requests</a>
                            </li>
                            
                        </ul>
                    </li>
                     <li>
                        <a href="/requisitioner/accounts/"><i class="fa fa-th-list "></i>Items on Account</a>
                    </li>
          
                </ul>
            </div>

</div>
        </nav>

       
           

        
        <!-- /. NAV SIDE  -->
        <div id="page-wrapper">
            <div id="page-inner" style="
            margin-bottom: 0px;
            ">
             
               <div class="panel panel-body" style="
                 margin-bottom: 0px;
                 padding-left: 2px;
                 font-size: 25px;
                 padding-top: 10px;
                 padding-bottom: 0px;
                ">
                <div>
                    Create a Purchase Request
                </div>
                  <hr> 
               </div>

               <div class="panel panel-body" style="
                 margin-bottom: 0px;
                 padding-left: 2px;
                 font-size: 18px;
                 padding-bottom: 10px;
                 padding-top: 0px;
                ">
                <div>
                    Items to Request
                </div>
               </div>

                
                    <div id="wrap" style="position:relative;">
                            <div id="wrap" style="position:relative;">
                            <div id="left" class ="panel"
                                style="
                                    height: 50px;
                                ">
                                 <div class="panel-body" style="
                                 padding-top:0px;
                                 padding-left: 0px;
                                 padding-right: 0px;
                                 ">

                            <div class="table-responsive">
                                <div id="dataTables-example_wrapper" class="dataTables_wrapper form-inline" role="grid">
                                    
                        <div class="col-md-12" style="
                                    padding-left: 0px;
                                    padding-right: 0px;
                                    
                                    ">
                                <div class="panel">
                            <div class="table-responsive">
                                <table id="myTable" class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Description</th>
                                            <th class="text-center">Unit</th>
                                            <th class="text-center">Unit Cost</th>
                                            <th class="text-center">Quantity</th>
                                            <th class="text-center">Total</th>
                                            <th class="text-center">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="table">
                                        
                                    </tbody>
                                </table>
                                
                                <button class="btn btn-sm btn-success" role= "button" aria-disabled="true" data-toggle="modal"  data-target="#newReg"><i class="icon-plus"></i> Add New Item</button>
                            
                            </div>
                        </div>
                            

                    </div>


                    </div>
                                </div>

                                

                            </div>
                           
                        </div>

                        </div>

                    

                    </div>

            
            <form id="addForm" class="form-horizontal" method="POST" action="">{% csrf_token %}  
               <div class="panel panel-body">
                   <div class="form-group">
                  <div class="header-right" style="padding-right: 40px;">
                                                                
                        <div style="display: inline; font-weight: 400;  font-size: 14px;">
                             Estimated Total Cost: 
                        </div>
                                                                
                        <div id="total" value="0" class="panel panel-default" style="display: inline; font-size: 18px;  font-weight: 400; padding:10px;">₱ 0
                         </div>
                     </div> 

               </div>     
        
               <div class="form-group" style="margin-top:50px;">
                    <label for="autosize" class="control-label col-lg-4" style=" font-size: 18px;">The Purpose of the Request:</label>

                    <div class="col-lg-6" >
                        <textarea id="autosize" placeholder="Enter a short paragraph about the details of your purpose of creating this request" class="form-control" style="overflow: hidden; word-wrap: break-word; resize: horizontal; height: 100px;"></textarea>
                    </div>

                </div>
                <hr>

                <div class="form-group">
                  <div class="header-right" style="padding-right: 40px; padding-top:20px;">
                         <button id="viewD" role="button" type="button" class="btn btn-info" role ="button" aria-disabled="true"><i class="icon-file"></i> View Document</button>
                         <button id="send" class="btn btn-success" role= "submit" aria-disabled="true"><i class="icon-upload"></i> Send Request</button>
                   </div> 

               </div>
               </div>   
                
            </form>


<!-- ===================================================   Modal ==================================================================================  -->
           
                       <div class="modal fade" id="newReg" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                            <h4 class="modal-title" id="H4"> New Item Information</h4>
                                    </div>
                                    
                                    <div class="modal-body">
                                        <div class="panel panel-body" style="padding-top:0px; margin:0px;">
                                            <form class="form-horizontal">

                                                <div id="descripDiv" class="form-group">
                                                        <label for="text1" class="control-label col-lg-4">Description: </label>
                                            
                                                    <div class="col-lg-8">
                                                        <input id="descrip" class="form-control" autofocus>
                                                        <span for="descrip" id="errorde"></span>
                                                    </div>
                                                </div>
                                                <div class="form-group" style="margin-bottom:10px;">
                                                        <label for="text1" class="control-label col-lg-4">Unit: </label>
                                                        
                                                    <div class="col-lg-8">
                                                        <input id="unit" class="form-control" list="compSeacrhList" />
                                                        <datalist id="compSeacrhList">
                                                        <option>Unit</option>
                                                        <option>Piece</option>
                                                        <option>Bundle</option>
                                                        <option>Strip</option>
                                                        <option>Pair</option>
                                                        <option>Gram</option>
                                                        <option>Kilogram</option>
                                                        <option>Ounce</option>
                                                        <option>Meter</option>
                                                        <option>Inch</option>
                                                        <option>Foot</option>
                                                        <option>Brd. Feet</option>
                                                        <option>Cu. Feet</option>
                                                        <option>Cu. Meter</option>
                                                        <option>Litre</option>
                                                        <option>Load</option>
                                                        <option>Peso</option>
                                                        </datalist>
                                                        <span id="errorun"></span>
                                                    </div>
                                            
                                                </div>

                                                <div class="form-group" style="margin-bottom:10px;">
                                                    <label for="text1" class="control-label col-lg-4">Unit Price: </label>
                                            
                                                    <div class="col-lg-8">
                                                        <input id="price" class="form-control" />
                                                        <span id="errorpr"></span>
                                                    </div>
                                                </div>
                                        
                                                <div class="form-group" style="margin-bottom:10px;">
                                                    <label for="text1" class="control-label col-lg-4">Quantity: </label>
                                            
                                                    <div class="col-lg-8" >
                                                        <input id="quantity" class="form-control" />
                                                        <span id="errorqu"></span>
                                                    </div>
                                                </div> 
                                            </form>
                                        </div>
                                    </div>
                                        
                                    <div class="modal-footer">
                                            <button id="addList" type="submit" class="btn btn-success" >Add to List</button>
                                    </div>
                                </div>
                            </div>
                        </div>

<!-- ===================================================   Modal ==================================================================================  -->

<!-- ===================================================   Modal ==================================================================================  -->
           
                       <div class="modal fade" id="editReg" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                            <h4 class="modal-title" id="H4"> New Item Information</h4>
                                    </div>
                                    
                                    <div class="modal-body">
                                        <div class="panel panel-body" style="padding-top:0px; margin:0px;">
                                            <form class="form-horizontal">

                                                <div id="descripDiv" class="form-group">
                                                        <label for="text1" class="control-label col-lg-4">Description: </label>
                                            
                                                    <div class="col-lg-8">
                                                        <input id="descrip2" class="form-control" autofocus>
                                                        <span  id="errorde"></span>
                                                    </div>
                                                </div>
                                                <div class="form-group" style="margin-bottom:10px;">
                                                        <label for="text1" class="control-label col-lg-4">Unit: </label>
                                            
                                                    <div class="col-lg-8">
                                                        <input id="unit2" class="form-control" />
                                                        <span id="errorun"></span>
                                                    </div>
                                            
                                                </div>

                                                <div class="form-group" style="margin-bottom:10px;">
                                                    <label for="text1" class="control-label col-lg-4">Unit Price: </label>
                                            
                                                    <div class="col-lg-8">
                                                        <input id="price2" class="form-control" />
                                                        <span id="errorpr"></span>
                                                    </div>
                                                </div>
                                        
                                                <div class="form-group" style="margin-bottom:10px;">
                                                    <label for="text1" class="control-label col-lg-4">Quantity: </label>
                                            
                                                    <div class="col-lg-8" >
                                                        <input id="quantity2" class="form-control" />
                                                        <span id="errorqu"></span>
                                                    </div>
                                                </div> 
                                            </form>
                                        </div>
                                    </div>
                                        
                                    <div class="modal-footer">
                                            <button id="addList2" type="submit" class="btn btn-success" >Update List</button>
                                    </div>
                                </div>
                            </div>
                        </div>

<!-- ===================================================   Modal ==================================================================================  -->
<!-- ===================================================   Modal ==================================================================================  -->
           
                       <div class="modal fade" id="errorReg" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog ">
                                <div class="modal-content ">
                                   
                                    
                                    <div class="modal-body ">

                                        <div class="media" role="submit" name="notif1" id="notif1" value="GGWP">
                                    
                                            <span class="pull-left" >
                                                <div class="btn btn-danger btn-lg btn-circle" role="button" aria-disabled="true" disabled = "disabled">
                                                    <i class="icon-exclamation"></i></div>
                                    </span>  
                                    <div class="media-body">
                                        <h5 class="media-heading" style="margin-top:10px;">
                                            <strong>Form was not filled completely.</strong>
                                        </h5>
                                        <hr>
                                        
                                        <p style="margin-bottom:10px;">It is either that no Items were added or the purpose was not indicated .</p>
                                        <p style="margin-bottom:10px;">Please provide all the informations ask before sending this request.</p>   
                                    </div>
                                    

                                </div>
                                        
                                    </div>
                                        
                                    <div class="modal-footer">
                                            <button id="addList2" data-dismiss="modal" type="submit" class="btn btn-info">OK</button>
                                    </div>
                                </div>
                            </div>
                        </div>

<!-- ===================================================   Modal ==================================================================================  -->

<!-- ===================================================   Modal ==================================================================================  -->
           
                       <div class="modal fade" id="transComp" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog ">
                                <div class="modal-content ">
                                   
                                    
                                    <div class="modal-body ">

                                        <div class="media" role="submit" name="notif1" id="notif1" value="GGWP">
                                    
                                            <span class="pull-left" >
                                                <div class="btn btn-success btn-lg btn-circle" role="button" aria-disabled="true" disabled = "disabled">
                                                    <i class="icon-ok"></i></div>
                                    </span>  
                                    <div class="media-body">
                                        <h5 class="media-heading" style="margin-top:10px;">
                                            <strong>Request Saved and Sent.</strong>
                                        </h5>
                                        <hr>
                                        
                                        <p style="margin-bottom:10px;">Your request was sent and now currently waiting for approval</p>
                                        <p style="margin-bottom:10px;">You will be notified as soon as your request's approval is decided</p>   
                                    </div>
                                    

                                </div>
                                        
                                    </div>
                                        
                                    <div class="modal-footer">
                                            <button id="sentNotif" data-dismiss="modal" type="submit" class="btn btn-info">OK</button>
                                    </div>
                                </div>
                            </div>
                        </div>

<!-- ===================================================   Modal ==================================================================================  -->
<!-- ===================================================   Modal ==================================================================================  -->
           
                       <div class="modal fade " id="docModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content ">
                                   
                                    
                                    <div class="modal-body ">
                                         
                                         <div class="panel-body" style="padding:50px; padding-bottom:15px;">
                            
                            <div class="table-responsive">
                                
                                <table class="table table-striped table-bordered table-hover" style="margin-bottom:0px;">
                                    <thead>
                                        <tr style="height:100px;">
                                            <td colspan="6" style="">
                                            <div style="width:100%;margin-top:20px;" class="text-center">
                                            
                                            <span style="font-size:20.0pt;
                                                mso-bidi-font-size:12.0pt;
                                                        font-weight: bold;
                                                        line-height:107%;
                                                        font-family:&quot;Times New Roman&quot;,serif;
                                                        mso-fareast-font-family:&quot;Times New Roman&quot; "
                                                        >PURCHASE REQUEST </span>
                                            </div>
                                            <div style="width:100%;" class="text-center">
                                            <span style="font-size:11.0pt;
                                                mso-bidi-font-size:11.0pt;
                                                        font-weight: 500;
                                                        line-height:107%;
                                                        font-family:&quot;Times New Roman&quot;,serif;
                                                mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                MINDANAO STATE UNIVERSITY – General Santos City 
                                            </span>
                                            </div>
                                            </td>
                                        </tr>
                                        <tr style="">
                                            <td style="width:90px;height:25px;margin:0px;padding:0px; padding-left:5px;" rowspan="2">
                                            <span style="font-size:12.0pt;
                                                mso-bidi-font-size:11.0pt;line-height:107%;
                                                        font-family:&quot;Times New Roman&quot;,serif;
                                            mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                    Department 
                                            </span>
                                            </td>
                                            
                                            <td rowspan="2" style="height:25px;margin:0px;padding:0px; padding-left:5px;">
                                                  <span id="docDept" style="font-size:12.0pt;
                                                        mso-bidi-font-size:11.0pt;line-height:107%;
                                                                font-family:&quot;Times New Roman&quot;,serif;
                                                    mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                    
                                            </span>  
                                            </td>
                                            
                                            <td style="width:100px;height:25px;margin:0px;padding:0px;padding-left:5px;">
                                                <span style="font-size:12.0pt;
                                                    mso-bidi-font-size:11.0pt;line-height:107%;
                                                            font-family:&quot;Times New Roman&quot;,serif;
                                                mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                PR No. : </span>
                                                </td>
                                            <td style="width:65px;height:25px;margin:0px;padding:0px;padding-left:5px;">
                                                <!-- Data on PRno.  -->
                                                <span style="font-size:12.0pt;
                                                    mso-bidi-font-size:11.0pt;line-height:107%;
                                                            font-family:&quot;Times New Roman&quot;,serif;
                                                mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                
                                                </span>
                                            </td>
                                            <td style="width:50px;height:25px;margin:0px;padding:0px;padding-left:5px;">
                                            <span style="font-size:12.0pt;
                                                mso-bidi-font-size:11.0pt;line-height:107%;
                                                        font-family:&quot;Times New Roman&quot;,serif;
                                            mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                Date: 
                                                </span>
                                            </td>
                                            <td style="width:90px;height:20px;margin:0px;padding:0px;padding-left:5px;">
                                                
                                                <!-- Data on Date  -->
                                                <span style="font-size:12.0pt;
                                                    mso-bidi-font-size:11.0pt;line-height:107%;
                                                            font-family:&quot;Times New Roman&quot;,serif;
                                                mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                
                                                </span>

                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width:100px;height:25px;margin:0px;padding:0px;padding-left:5px;">
                                                <span style="font-size:12.0pt;
                                                    mso-bidi-font-size:11.0pt;line-height:107%;
                                                            font-family:&quot;Times New Roman&quot;,serif;
                                                mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                SAI No. : </span>
                                                </td>
                                            <td style="width:65px;height:25px;margin:0px;padding:0px;padding-left:5px;">
                                                <!-- Data on PRno.  -->

                                            </td>
                                            <td style="width:50px;height:25px;margin:0px;padding:0px;padding-left:5px;">
                                            <span style="font-size:12.0pt;
                                                mso-bidi-font-size:11.0pt;line-height:107%;
                                                        font-family:&quot;Times New Roman&quot;,serif;
                                            mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                Date: 
                                                </span>
                                            </td>
                                            <td style="width:90px;height:20px;margin:0px;padding:0px;padding-left:5px;">
                                                
                                                <!-- Data on Date  -->
                                            </td>

                                        </tr>
                                        <tr>
                                           <td style="width:90px;height:25px;margin:0px;padding:0px; padding-left:5px;">
                                            <span style="font-size:12.0pt;
                                                mso-bidi-font-size:11.0pt;line-height:107%;
                                                        font-family:&quot;Times New Roman&quot;,serif;
                                            mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                    Section
                                            </span>
                                            </td>
                                            
                                            <td style="height:25px;margin:0px;padding:0px; padding-left:5px;">
                                                <!-- Data on Department  -->
                                            </td>
                                            
                                            <td style="width:100px;height:25px;margin:0px;padding:0px;padding-left:5px;">
                                                <span style="font-size:12.0pt;
                                                    mso-bidi-font-size:11.0pt;line-height:107%;
                                                            font-family:&quot;Times New Roman&quot;,serif;
                                                mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                ALOBS NO. : </span>
                                                </td>
                                            <td style="width:65px;height:25px;margin:0px;padding:0px;padding-left:5px;">
                                                <!-- Data on PRno.  -->

                                            </td>
                                            <td style="width:50px;height:25px;margin:0px;padding:0px;padding-left:5px;">
                                            <span style="font-size:12.0pt;
                                                mso-bidi-font-size:11.0pt;line-height:107%;
                                                        font-family:&quot;Times New Roman&quot;,serif;
                                            mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                Date: 
                                                </span>
                                            </td>
                                            <td style="width:90px;height:20px;margin:0px;padding:0px;padding-left:5px;">
                                                
                                                <!-- Data on Date  -->
                                            </td>
                                        </tr>

                                        
                                        

                                    </thead>
                                </table>
                                <table  class="table table-striped table-bordered table-hover" style="margin-bottom:0px;">
                                    <thead>
                                        <tr>
                                            <td style="width:63px;height:25px;margin:0px;padding:0px;" class="text-center">
                                                <span style="font-size:12.0pt;
                                                    mso-bidi-font-size:11.0pt;
                                                            font-weight: bold;
                                                            line-height:107%;
                                                            font-family:&quot;Times New Roman&quot;,serif;
                                                mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                            Quantity 
                                                </span>
                                            </td>
                                            <td style="width:50px;height:25px;margin:0px;padding:0px;" class="text-center">
                                               <span style="font-size:12.0pt;
                                                    mso-bidi-font-size:11.0pt;
                                                            font-weight: bold;
                                                            line-height:107%;
                                                            font-family:&quot;Times New Roman&quot;,serif;
                                                mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                            Unit Issue
                                                </span>
                                            </td>
                                            <td style="height:25px;margin:0px;padding:0px;padding-left:5px;" class="text-center">
                                                <span style="font-size:12.0pt;
                                                    mso-bidi-font-size:11.0pt;
                                                            font-weight: bold;
                                                            line-height:107%;
                                                            font-family:&quot;Times New Roman&quot;,serif;
                                                mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                            Description 
                                                </span>
                                            </td>
                                            <td style="width:40px;height:25px;margin:0px;padding:0px;" class="text-center">
                                                <span style="font-size:12.0pt;
                                                    mso-bidi-font-size:11.0pt;
                                                            font-weight: bold;
                                                            line-height:107%;
                                                            font-family:&quot;Times New Roman&quot;,serif;
                                                mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                            Stock No. 
                                                </span>
                                            </td>
                                            <td style="width:90px;height:25px;margin:0px;padding:0px;" class="text-center">
                                                <span style="font-size:12.0pt;
                                                    mso-bidi-font-size:11.0pt;
                                                            font-weight: bold;
                                                            line-height:107%;
                                                            font-family:&quot;Times New Roman&quot;,serif;
                                                mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                        Estimated Unit Cost
                                                    </span>
                                            </td>
                                            <td style="width:90px;height:25px;margin:0px;padding:0px;" class="text-center">
                                            <span style="font-size:12.0pt;
                                                mso-bidi-font-size:11.0pt;
                                                        font-weight: bold;
                                                        line-height:107%;
                                                        font-family:&quot;Times New Roman&quot;,serif;
                                            mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                        Estimated Total Cost 
                                            </span>
                                        </td>

                                        </tr>

                                    </thead>

                                    <tbody id="docItems">
                                        
                                    </tbody>
                                
                                </table>
                                 <table  class="table table-striped table-bordered table-hover" style="padding-bottom:0px;">
                                       <thead>
                                       <tr>
                                           <td style="width:120px;height:35px;margin:0px;padding:5px;" class="text-center">
                                            <span style="font-size:12.0pt;
                                                    mso-bidi-font-size:11.0pt;
                                                            line-height:107%;
                                                            font-family:&quot;Times New Roman&quot;,serif;
                                                mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                             Purpose:
                                                </span>
                                           </td>
                                           <td style="height:35px;margin:0px;padding:5px;" class="text-center" colspan="2">
                                               <span id="docPurpose" style="font-size:12.0pt;
                                                    mso-bidi-font-size:11.0pt;
                                                            line-height:107%;
                                                            font-family:&quot;Times New Roman&quot;,serif;
                                                mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                             Requisitioner's indicated purpose for requesting the items above
                                                </span>
                                           </td>
                                       </tr>
                                       <tr>
                                               <td style="width:120px;height:25px;margin:0px;padding:0px;" class="text-center">
                                                   
                                               </td>
                                               <td style="height:25px;margin:0px;padding:0px;" class="text-center">
                                                   <span style="font-size:12.0pt;
                                                            mso-bidi-font-size:11.0pt;
                                                                    line-height:107%;
                                                                    font-family:&quot;Times New Roman&quot;,serif;
                                                        mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                                     Requested By:
                                                        </span>
                                               </td>
                                               <td style="height:25px;margin:0px;padding:0px;" class="text-center">
                                                   <span style="font-size:12.0pt;
                                                            mso-bidi-font-size:11.0pt;
                                                                    line-height:107%;
                                                                    font-family:&quot;Times New Roman&quot;,serif;
                                                        mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                                     Approved By:
                                                        </span>
                                               </td>
                                           
                                       </tr>
                                        <tr>
                                            <td style="width:120px;height:25px;margin:0px;padding:0px;" class="text-center">
                                                       <span style="font-size:12.0pt;
                                                                mso-bidi-font-size:11.0pt;
                                                                        line-height:107%;
                                                                        font-family:&quot;Times New Roman&quot;,serif;
                                                            mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                                         Signature:
                                                            </span>
                                                   </td>
                                                   <td style="height:25px;margin:0px;padding:0px;" class="text-center">
                                                       
                                                   </td>
                                                   <td style="height:25px;margin:0px;padding:0px;" class="text-center">
                                                       
                                                   </td>
                                           
                                       </tr>
                                       <tr>
                                            <td style="width:120px;height:25px;margin:0px;padding:0px;" class="text-center">
                                                   <span style="font-size:12.0pt;
                                                            mso-bidi-font-size:11.0pt;
                                                                    line-height:107%;
                                                                    font-family:&quot;Times New Roman&quot;,serif;
                                                        mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                                     Printed Name:
                                                        </span>
                                               </td>
                                               <td style="height:25px;margin:0px;padding:0px;" class="text-center">
                                                    <span id="docReq" style="font-size:12.0pt;
                                                            mso-bidi-font-size:11.0pt;
                                                                    line-height:107%;
                                                                    font-family:&quot;Times New Roman&quot;,serif;
                                                        mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                                     
                                                        </span>
                                               </td>
                                               <td style="height:25px;margin:0px;padding:0px;" class="text-center">
                                                   
                                               </td>
                                       </tr>
                                       <tr>
                                                <td style="width:120px;height:25px;margin:0px;padding:0px;" class="text-center">
                                                   <span style="font-size:12.0pt;
                                                            mso-bidi-font-size:11.0pt;
                                                                    line-height:107%;
                                                                    font-family:&quot;Times New Roman&quot;,serif;
                                                        mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                                     Designation:
                                                        </span>
                                               </td>
                                               <td style="height:25px;margin:0px;padding:0px;" class="text-center">
                                                   <span id="docDesig" style="font-size:12.0pt;
                                                            mso-bidi-font-size:11.0pt;
                                                                    line-height:107%;
                                                                    font-family:&quot;Times New Roman&quot;,serif;
                                                        mso-fareast-font-family:&quot;Times New Roman&quot;">
                                                                     
                                                        </span>
                                               </td>
                                               <td style="height:25px;margin:0px;padding:0px;" class="text-center">
                                                   
                                               </td>
                                       </tr>
                                       </thead>

                                 </table>
                            </div>
                        </div>
                                        
                                    </div>
                                    <dir class="text-center" style="width:100%; padding-bottom:0px; margin-bottom:6px; font-size:22; font-weight:bold;">
                                        This document is not available for download. 
                                    </dir>
                                    <dir class="text-center" style="width:100%; padding-bottom:30px;  margin-top:6px; font-size:22; font-weight:bold;">
                                        It will be automatically downloaded to your computer once you've been notified that this request was approved
                                    </dir>
                                        
                                    <div class="modal-footer">
                                            <button id="sentNotif" data-dismiss="modal" type="submit" class="btn btn-info">OK</button>
                                    </div>
                                </div>
                            </div>
                        </div>

<!-- ===================================================   Modal ==================================================================================  -->



            <!-- Put code here -->
            </div>
            <!-- /. PAGE INNER  -->
        </div>
        <!-- /. PAGE WRAPPER  -->
    </div>
    <!-- /. WRAPPER  -->
    <div id="footer-sec">
        &copy; Mindanao State University - General Santos City
    </div>
    <!-- /. FOOTER  -->
    <!-- SCRIPTS -AT THE BOTOM TO REDUCE THE LOAD TIME-->
    <!-- JQUERY SCRIPTS -->
    <script src="{% static 'assets/js/jquery-1.10.2.js' %}"></script>
    <!-- BOOTSTRAP SCRIPTS -->
    <script src="{% static 'assets/js/bootstrap.js' %}"></script>
    <!-- METISMENU SCRIPTS -->
    <script src="{% static 'assets/js/jquery.metisMenu.js' %}"></script>
    <!-- CUSTOM SCRIPTS -->
    <script src="{% static 'assets/js/custom.js' %}"></script>

    <script type="text/javascript">
       
       var total = 0
       var theArray = {}
       var theArrayIndex = 0       
       var prevTotal = 0;
    
       
      

       document.getElementById("addList").onclick = function() {
            
            var descrip = document.getElementById("descrip").value;
            var unit = document.getElementById("unit").value;
            var price = document.getElementById("price").value;
            var quantity = document.getElementById("quantity").value;
            var itemTotal = document.getElementById("price").value * document.getElementById("quantity").value;
            var itemTotalToString = "" + itemTotal;

            setErrorMsgToEmpty()

            if (descrip == ""||unit == ""||price == ""||quantity == "") {


                if (descrip == "") {
                    
                    document.getElementById("errorde").innerHTML = "Don't leave this blank"
                    return false;

                }
                if (unit == "") {
                    document.getElementById("errorun").innerHTML = "Don't leave this blank" 
                    return false;

                }
                if (price == "") {
                    document.getElementById("errorpr").innerHTML = "Don't leave this blank" 
                    return false;

                }
                if (quantity == "") {
                    document.getElementById("errorqu").innerHTML = "Don't leave this blank" 
                    return false;

                }


            } else {
            
            var t = ''
            var tr = '<tr id = "'+theArrayIndex+'_tr">';
                     tr += '<td>'+descrip+'</td>';
                     tr += '<td class="text-center">'+unit+'</td>';
                     tr += '<td class="text-center">₱ '+comaSegregator(price)+'</td>';
                     tr += '<td class="text-center">'+comaSegregator(quantity)+'</td>';
                     tr += '<td class="text-center">₱ '+comaSegregator(itemTotalToString)+'</td>';
                     tr += '<td class="text-center">';
                     tr += '<button id = "'+theArrayIndex+'_editRow" value="'+theArrayIndex+'" data-toggle="modal"  data-target="#editReg" class="btn btn-xs btn-success" role= "button" aria-disabled="true"><i class="icon-edit"></i></button>';
                     tr += ' <button id = "'+theArrayIndex+'_removeRow" value="'+theArrayIndex+'" class="btn btn-xs btn-danger" role= "submit" aria-disabled="true"><i class="icon-remove"></i></button>';
                     tr +='</td>';
                     tr += "</tr>";
                     t += tr;
            
            
            total = total + itemTotal;
            
            var totalToString = ""+total;
            
            document.getElementById("table").innerHTML += t;
            document.getElementById("total").innerHTML = "₱ "+comaSegregator(totalToString)

            theArray[theArrayIndex] = {'1':descrip, '2':unit, '3':price, '4':quantity};
            
            theArrayIndex = theArrayIndex + 1;
             
            document.getElementById("descrip").value = "";
            document.getElementById("unit").value = "";
            document.getElementById("price").value = "";
            document.getElementById("quantity").value = "";


            $('#newReg').modal('toggle');

        }
            
    };

       

       $('#addList2').click(function() {

        var btnValue = $('#addList2').val()

        var descrip = document.getElementById("descrip2").value;
        var unit = document.getElementById("unit2").value;
        var price = document.getElementById("price2").value;
        var quantity = document.getElementById("quantity2").value;
        var itemTotal = document.getElementById("price2").value * document.getElementById("quantity2").value;
        var itemTotalToString = "" + itemTotal;
        
        var tr = '<td>'+descrip+'</td>';
                     tr += '<td class="text-center">'+unit+'</td>';
                     tr += '<td class="text-center">₱ '+comaSegregator(price)+'</td>';
                     tr += '<td class="text-center">'+comaSegregator(quantity)+'</td>';
                     tr += '<td class="text-center">₱ '+comaSegregator(itemTotalToString)+'</td>';
                     tr += '<td class="text-center">';
                     tr += '<button id = "'+btnValue+'_editRow" value="'+btnValue+'" data-toggle="modal"  data-target="#editReg" class="btn btn-xs btn-success" role= "button" aria-disabled="true"><i class="icon-edit"></i></button>';
                     tr += ' <button id = "'+btnValue+'_removeRow" value="'+btnValue+'" class="btn btn-xs btn-danger" role= "submit" aria-disabled="true"><i class="icon-remove"></i></button>';
                     tr +='</td>';
        
        total = total - prevTotal;
        total = total + itemTotal;
        var totalToString = ""+total;
        
        document.getElementById(btnValue+"_tr").innerHTML = tr;  
        document.getElementById("total").innerHTML = "₱ "+comaSegregator(totalToString)
        
        theArray[btnValue] = {'1':descrip, '2':unit, '3':price, '4':quantity};
                      
        $('#editReg').modal('toggle');    
           
       });

     $('#myTable').on('click','button', function (e) {
        var id = this.id;
        var value = document.getElementById(id).value
        
        var theArrayData = theArray[value]
        prevTotal = theArrayData['3']*theArrayData['4'];
        
        if (id === value+'_removeRow') {
            
            
            total = total - prevTotal;
            var totalToString = ""+total;
        
        
            document.getElementById("total").innerHTML = "₱ "+comaSegregator(totalToString)
            
            $(this).closest ('tr').remove ();

            delete theArray[value];

        } else {

            
            
            document.getElementById("descrip2").value = theArrayData['1'];
            document.getElementById("unit2").value = theArrayData['2'];
            document.getElementById("price2").value = theArrayData['3'];
            document.getElementById("quantity2").value = theArrayData['4'];
            
            $('#addList2').val(value);
        
        }

    });

    
    document.getElementById("send").onclick = function() {
            var purpose = document.getElementById("autosize").value;

            if (purpose == ""|| total  == 0) {
                    $('#errorReg').modal('toggle');
                    //alert("Form was not filled completely Either no Items added or indicated purpose")
                    return false;
            } else {
                    return true;
            }
    }    

    //document.getElementById("removeRow").onclick = function () {
       // var row = document.getElementById("removeRow").value;
        //deleteRow(row);
   // };

    //document.getElementById("send").onclick = function() {
       // alert("GGWP");
   // }

   $('#price').keypress(function(event){

       if(event.which != 8 && isNaN(String.fromCharCode(event.which))){
            document.getElementById("errorpr").innerHTML = "Non-number input is not allowed" 
           event.preventDefault(); //stop character from entering input
       }
       else{
        document.getElementById("errorpr").innerHTML = ""
        $('#price').removeAttr("style") 
       }

   });

   $('#quantity').keypress(function(event){

       if(event.which != 8 && isNaN(String.fromCharCode(event.which))){
            document.getElementById("errorqu").innerHTML = "Non-number input is not allowed" 
           event.preventDefault(); //stop character from entering input
       }
       else{
        document.getElementById("errorqu").innerHTML = "" 
       }

   });

   $('#viewD').click(function (args) {

        document.getElementById("docItems").innerHTML = '';

        $('#docDept').html('{{dept}}');
        $('#docReq').html('{{fname}} {{lname}}');
        $('#docDesig').html('{{designation}}');
        $('#docPurpose').html($('#autosize').val());
        
        
        
        for (var i in theArray) {

            var data = theArray[i]

            var tr = '<tr>'
                tr += '<td style="width:63px;height:25px;margin:0px;padding:0px;" class="text-center fontStyle">';
                tr += '<span style="font-size:11.0pt;">'
                tr +=  ''+data['4']+''
                tr += '</span>'
                tr += '</td>'
                tr += '<td style="width:50px;height:25px;margin:0px;padding:0px;" class="text-center fontStyle">'
                tr += '<span style="font-size:11.0pt;">'
                tr +=  ''+data['2']+''
                tr += '</span> '
                tr += '</td>'
                tr += '<td style="height:25px;margin:0px;padding:0px;padding-left:5px;" class="text-center fontStyle">'
                tr += '<span style="font-size:11.0pt;">'
                tr += ''+data['1']+''
                tr += '</span>'
                tr += '</td>'
                tr += '<td style="width:40px;height:25px;margin:0px;padding:0px;" class="text-center fontStyle">'
                tr += '<span style="font-size:11.0pt;">'
                tr += ''+(parseInt(i)+1)+''
                tr += '</span>'
                tr += '</td>'
                tr += '<td style="width:90px;height:25px;margin:0px;padding:0px;" class="text-center fontStyle">'
                tr += '<span style="font-size:11.0pt;">'
                tr += ''+data['3']+''
                tr += '</span>'
                tr += '</td>'
                tr += '<td style="width:90px;height:25px;margin:0px;padding:0px;" class="text-center fontStyle">'
                tr += '<span style="font-size:11.0pt;">'
                tr += ''+(data['4']*data['3'])+''
                tr += '</span>'
                tr += '</td>'
                tr += '</tr>'

                document.getElementById("docItems").innerHTML += tr;
        }



        var defRowNum = 35;
        var blankRow = defRowNum - theArrayIndex

        for (var i = 0; i < blankRow; i++) {
            var tr = '<tr>';
                tr +='<td style="width:63px;height:25px;margin:0px;padding:0px;" class="text-center">';
                tr += '</td>';
                tr += '<td style="width:50px;height:25px;margin:0px;padding:0px;" class="text-center">';
                tr += '</td>';
                tr += '<td style="height:25px;margin:0px;padding:0px;padding-left:5px;" class="text-center">';
                tr += '</td>';
                tr += '<td style="width:40px;height:25px;margin:0px;padding:0px;" class="text-center">';
                tr += '</td>';
                tr += '<td style="width:90px;height:25px;margin:0px;padding:0px;" class="text-center">';
                tr += '</td>';
                tr += '<td style="width:90px;height:25px;margin:0px;padding:0px;" class="text-center">';
                tr += '</td>';
                tr += '</tr>';
            

             document.getElementById("docItems").innerHTML += tr;
        }

       $('#docModal').modal('toggle');
   })
   
   $('#sentNotif').click(function () {
       
       $('#transComp').modal('toggle')
       window.location.href = "/requisitioner/pr/";
   
   })

    $(document).on('submit', '#addForm', function(e){
            e.preventDefault();
            
            
            $.ajax({
                type: 'POST',
                url:'/requisitioner/addpr/',
                data:{
                    
                    theMatrix: JSON.stringify(theArray),
                    purpose: $('#autosize').val(),
                    csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),

                },

                    success:function() {
                        $('#transComp').modal('toggle')
                        
                    }

            });


    });

    function comaSegregator(input){

        var output = ""
        var indexCheck = 1
        for (var i = input.length - 1; i >= 0; i--) {
            
            if (indexCheck%3 == 0) {

                if (i == 0) {
                     output = input[i] + output;
                    indexCheck = indexCheck + 1;

                } else {
                     output = ", " + input[i] + output;
                    indexCheck = indexCheck + 1;
                }
                   
            } else {
                output = input[i] + output;
                indexCheck = indexCheck + 1;
            }
        }

        return(output)
    }


    function setErrorMsgToEmpty() {
        
        document.getElementById("errorde").innerHTML = "";
        document.getElementById("errorpr").innerHTML = "";
        document.getElementById("errorun").innerHTML = "";
        document.getElementById("errorqu").innerHTML = "";
    }

    </script>


</body>
</html>
