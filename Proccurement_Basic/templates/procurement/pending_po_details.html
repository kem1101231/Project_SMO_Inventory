{% extends 'procurement/base.html' %}
{% load staticfiles %}
{% block content %}
        <!-- /. NAV SIDE  -->


    <style type="text/css">
        
        .test25{
            width: 100%;
            height: 100%;
        
        }
         

        .test25 img{
             
             
             max-height: 150px;
             
         }
         .dataFont3{
            
            font-size: 15px; 
            font-weight: bold; 
        
         }

         .dataFont4{
            
            font-weight: 450;  
            font-size: 15px;
         }
                 .test25{
            width: 100%;
            height: 100%;
        
        }
         

         .dataFont1{
            
            font-size: 15px; 
            font-weight: bold; 
            padding:7px; 
            margin-bottom:2px;
        
         }

         .dataFont2{
            
            font-weight: 450;  
            font-size: 15px;
            padding:7px; 
            margin-bottom:2px;

    </style>

        <div id="page-wrapper">
            <form id="theReqData" action="" method="POST">{% csrf_token %}
            <div class="panel-body" style="
                 margin-bottom: 0px;
                 padding-left: 15px;
                 font-size: 25px;
                 padding-top: 10px; 
                 padding-bottom: 0px;
                 margin-top:50px; 

                ">
                <div>
                 <span name="reqNum" id="reqNum" value="{{pageData1.0.0}}">Validate Purchase Order</span>
                 
                </div>
                 
               </div>
               </form>
            <div id="page-inner" style="margin-top:0px; background-color: #ddd!important;">
             
                <hr>
                 


                 
                <div class="col-lg-7" style="">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title">Basic Information</h3>
                            </div><!-- height:590px;-->
                            <div class="panel-body" style=" height:250px; padding-left:20px;">
                            
                           
                            <div class="form-group">
                                <div style="padding-left: 2px; width:100%; ">
                                    <div class=" dataFont2 col-lg-5" >
                                        Date Prepared:  
                                    </div>
                                    <div class="dataFont1 col-lg-6" >
                                         {{pageData1.0.2}}
                                    </div>
                                </div> 
                            </div>
                            <div class="form-group">
                                <div style="padding-left: 2px; width:100%; ">
                                    <div class=" dataFont2 col-lg-5" >
                                     P.R. Reference:  
                                    </div>
                                    <div class="dataFont1 col-lg-6" >
                                        {{pageData1.0.13}}
                                    </div>
                                </div> 
                            </div>
                            <div class="form-group">
                                <div style="padding-left: 2px; width:100%; ">
                                    <div class=" dataFont2 col-lg-5" >
                                       PR Approved Date:  
                                    </div>
                                    <div class="dataFont1 col-lg-6" >
                                        January 01, 2017
                                    </div>
                                </div> 
                            </div>
                            <div class="form-group">
                                <div style="padding-left: 2px; width:100%; ">
                                    <div class=" dataFont2 col-lg-5" >
                                     Requesting Office:  
                                    </div>
                                    <div class="dataFont1 col-lg-6" >
                                        Name of the Requesting Office
                                    </div>
                                </div> 
                            </div>
                             <div class="form-group">
                                <div style="padding-left: 2px; width:100%; ">
                                    <div class=" dataFont2 col-lg-5" >
                                      
                                    </div>
                                    <div class="dataFont1 col-lg-7" >
                                        
                                    </div>
                                </div> 
                            </div>
                            
                            
                            
                            <div class="form-group">
                                <div style="padding-left: 2px; width:100%; ">
                                    <div class=" dataFont2 col-lg-5" >
                                        Recipient Supplier:  
                                    </div>
                                    <div class="dataFont1 col-lg-7" >
                                        {{pageData3.0.0}}
                                    </div>
                                </div> 
                            </div>
                            <div class="form-group">
                                <div style="padding-left: 2px; width:100%; ">
                                    <div class=" dataFont2 col-lg-5" >
                                        Conforme:  
                                    </div>
                                    <div class="dataFont1 col-lg-7" >
                                       {{pageData1.0.12}}
                                    </div>
                                </div> 
                            </div>
                            
                            
                            
                             
                            </div>
                        </div>
                    </div>
                    
                   
                    <div class="col-lg-5" style=" padding-left:0px;">
                         <div class="panel panel-info">
                            <div class="panel-heading">
                                <h3 class="panel-title">Validate Approval Status</h3>
                            </div>
                            <div class="panel-body" style=" height:250px; padding-left:20px;">
                                
                                <form class="form-horizontal">


                                                <div id="descripDiv" class="form-group">
                                                        <label for="text1" class="control-label col-lg-4">P.O. Number: </label>
                                            
                                                    <div class="col-lg-7">
                                                        <input id="poNumber" class="form-control" autofocus>
                                                        <span  id="errorpo"></span>
                                                    </div>
                                                </div>  
                                                  
                                                <div id="descripDiv" class="form-group">
                                                        <label for="text1" class="control-label col-lg-4">Funding: </label>
                                            
                                                    <div class="col-lg-7">
                                                        <input id="descrip2" class="form-control" autofocus>
                                                        <span  id="errorde"></span>
                                                    </div>
                                                </div>
                                                <div class="form-group" style="margin-bottom:10px;">
                                                        <label for="text1" class="control-label col-lg-4">Approval Date: </label>
                                            
                                                    <div class="col-lg-7">
                                                        <input id="openingDate" class="form-control" />
                                                        <span id="errorun"></span>
                                                    </div>
                                            
                                                </div>

                                                <div class="form-group" style="margin-bottom:10px;">
                                                    <label for="text1" class="control-label col-lg-4">Date Served: </label>
                                            
                                                    <div class="col-lg-7">
                                                        <input id="serveDate" class="form-control" />
                                                        <span id="errorpr"></span>
                                                    </div>
                                                </div>   
                                        
                                            </form>

                        <form action="" method="post">{% csrf_token %}
                           <div class="text-right" style="margin-top:20px; padding-right:10px;">
                                <button class="btn btn-success btn-sm" type="button" role ="button" aria-disabled="true" id="addList2" name="approveButton" value="{{pageData1.0.0}}" style="margin-right:6px;"  data-toggle="modal"  data-target="#editReg"><i class="icon-ok"></i> Validate</button>
                                
                                <button class="btn btn-danger btn-sm" type="button" role ="button" aria-disabled="true" id="declineButton" name="declineButton" value="{{pageData1.0.0}}"  data-toggle="modal"  data-target="#newReg"><i class="icon-remove"></i> Declined</button>
                      
                            
                      </div>

                      </form>                  
                    

                            
                                
                            </div>
                        </div>
                    </div>
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div style="   
                                     display:inline;
                                     float:right; 
                                     right:0; ">

                       <div class="form-group">
                  <div class="header-right" >
                                                                
                      <div style="display: inline; font-weight: 400;  font-size: 14px; font-weight: bold; ">
                           Estimated Total Cost: 
                    </div>
                                                                
                        <div class="panel panel-default" style="display: inline; font-size: 18px;  font-weight: 400; padding:10px;">
                             00000.00
                        </div>
                    
                    </div> 

               </div>

                 </div>
                        </div>
                    </div>

                </div>    
                  
                 <div class="col-lg-12" style="display: inline;">
                    
                       

                        <!--  -->
                        
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title">Bids and Selection Summary</h3>
                            </div>
                            <div class="panel-body">
                               <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Description</th>
                                            <th class="text-center">Quantity</th>
                                            <th class="text-center">Unit</th>
                                            <th class="text-center">Unit Cost</th>
                                            <th class="text-center">Total</th>
                                        </tr>
                                    </thead>
                                    <tbody>

                                    {% for x in pageData2 %}
                                        <tr>
                                            <td>{{x.4}}</td>
                                            <td class="text-center">{{x.2}}</td>
                                            <td class="text-center">{{x.3}}</td>
                                            <td class="text-center">{{x.5}}</td>
                                            <td class="text-center">{{x.6}}</td>
                                            
                                        </tr>
                                        
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                                
                            </div>
                        </div>
                    
                    <!-- -->

                </div>


                <!-- /. ROW  -->
                
                  

                <div class="panel-body"  style="padding:0px;">
                    

               </div>


                </div>    

                </div>


            </div>
            <!-- /. PAGE INNER  -->
        </div>

<!-- ===================================================   Modal ==================================================================================  -->
           
                       <div class="modal fade" id="newReg" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                            <form action="" method="POST">{% csrf_token %} 
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                            <h4 class="modal-title" id="H4"> Enter reason of why it was declined</h4>
                                    </div>
                                   
                                    
                                    <div class="modal-body">

                                            <div class="checkbox" >
                                                        <label>
                                                            <div class="checker hover"><span><input checked id="chck1" class="uniform" type="checkbox" value="option1"></span></div>Select a Reason
                                                        </label>
                                             </div>
                                             
                                             <div>
                                                <select id="selReason" class="form-control">
                                                <option>Reason 1</option>
                                                <option>Reason 2</option>
                                                <option>Reason 3</option>
                                                <option>Reason 4</option>
                                                <option>Reason 5</option>
                                            </select>

                                             </div>
                                             

                                             <div class="checkbox">
                                                        <label>
                                                            <div class="checker hover"><span><input id="chck2" class="uniform" type="checkbox" value="option2"></span></div>Specify Reason
                                                        </label>
                                             </div>
                                                    
                                                    <div>
                                                        <textarea id="reasonIn" class="form-control" style="overflow: hidden; word-wrap: break-word; resize: horizontal; height: 100px;" disabled></textarea>
                                                    </div>
                                                
                                      
                                    </div>
                                   
                                      
                                          <div class="modal-footer">
                                            <button id="submitDecline" type="button" role="button" class="btn btn-success">Submit</button>
                                    </div>

                                        
                                       
                                     
                                     
                                    
                                </div>
                                </form>
                            </div>
                        </div>

<!-- ===================================================   Modal ==================================================================================  -->



        <!-- /. PAGE WRAPPER  -->
    </div>
    <!-- /. WRAPPER  -->
    <div id="footer-sec">
        &copy; Mindanao State University - General Santos City
    </div>
    <!-- /. FOOTER  -->
    <!-- SCRIPTS -AT THE BOTOM TO REDUCE THE LOAD TIME-->
    <!-- JQUERY SCRIPTS -->
    
    <script src="{% static 'assets/js/jquery-1.10.2.js' %}"></script>
    <!-- BOOTSTRAP SCRIPTS -->
    <script src="{% static 'assets/js/bootstrap.js' %}"></script>
    <!-- METISMENU SCRIPTS -->
    <script src="{% static 'assets/js/jquery.metisMenu.js' %}"></script>
    <!-- CUSTOM SCRIPTS -->
    <script src="{% static 'assets/js/custom.js' %}"></script>
   
    <script src="{% static 'assets/plugins/datepicker/js/bootstrap-datepicker.js' %}"></script>

    <script type="text/javascript">


            var validateType = ''
        
            $('#chck1').click(function(e) {
                reasonRef = 'select';
               $('#chck2').removeAttr('checked')
               $('#reasonIn').attr('disabled', '')
               $('#selReason').removeAttr('disabled')
            });

            $('#chck2').click(function(e) {
                reasonRef = 'define';
               $('#chck1').removeAttr('checked')
               $('#selReason').attr('disabled', '')
               $('#reasonIn').removeAttr('disabled')


          
            });   


              $('#openingDate').focusin(function() {
                $('#openingDate').datepicker({
                    format: "yyyy-mm-dd"
            });

            });

            $('#serveDate').focusin(function() {
                $('#serveDate').datepicker({
                    format: "yyyy-mm-dd"
            });

            });
            
            $('#addList2').click(function(e) {
                
                validateType = 'approve'

                if ($('#descrip2').val() === '') {
                        $('#errorde').html("Don't leave this blank")
                        return false;
                } else {
                    console.log();
                        $.ajax({
                            type: 'POST',
                            url:'/procurement_office/validatePO/',
                            data:{
                                
                                'ponum': $('#addList2').val(),
                                'poNumber': $('#poNumber').val(),
                                'validateType': validateType,
                                'fundRef': $('#descrip2').val(),
                                'approvalDate':$('#openingDate').val(),
                                'servingDate': $('#serveDate').val(),
                                csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                           
                            },

                            success: function(response) {
                                    alert("validated")
                                    window.location.href = "/procurement_office/po";
                            }

                        });

                }
            });

            $('#submitDecline').click(function(e) {
                // body...
            });



    </script>

    <script type="text/javascript">
        
         $(document).ready(function () {
                

                var someDate = new Date();
                var numberOfDaysToAdd = 15;

                
                someDate.setDate(someDate.getDate() + numberOfDaysToAdd);

                var dateToDisplay = someDate.getFullYear()+ '-' + 
                                    setSingleDigitToDouble(someDate.getMonth()+1)+ '-' + 
                                    setSingleDigitToDouble(someDate.getDate());
                    
                $('#openingDate').val(dateToDisplay);
                $('#serveDate').val(dateToDisplay);

            
            });

         function setSingleDigitToDouble(input) {
            
            
            var outputData = "" + input;
            
            
            if (outputData.length === 1) {
                outputData = "0"+input;
            }

            return outputData;

         }

    </script>
    
    <script type="text/javascript">
            
    $(document).ready(function () {
        $('#po').attr('class', 'active-menu-proc')
        $('#proTop').attr('class', 'active-menu-top')
        $('#proUL').attr('class','nav nav-second-level collapse in')
    })

    </script>
{% endblock %}