<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Procurement - Home</title>
    {% load staticfiles %}
   <!-- BOOTSTRAP STYLES-->
    <link href="{% static 'assets/css/bootstrap.css' %}" rel="stylesheet" />
    <!-- FONTAWESOME STYLES-->
    <link href="{% static 'assets/css/font-awesome.css' %}" rel="stylesheet" />
    <!--CUSTOM BASIC STYLES-->
    <link href="{% static 'assets/css/basic.css' %}" rel="stylesheet" />
    <link href="{% static 'assets/css/navbar-proc.css' %}" rel="stylesheet" />
    <!--CUSTOM MAIN STYLES-->
    <link href="{% static 'assets/css/custom.css' %}" rel="stylesheet" />
    <!-- GOOGLE FONTS-->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
    
    <link rel="stylesheet" href="{% static 'assets/plugins/Font-Awesome/css/font-awesome.css' %}" />

    <link rel="shortcut icon" href="{% static 'assets/img/Msu.ico' %}" type="image/x-icon" /> 


    <link rel="stylesheet" href="{% static 'assets/plugins/daterangepicker/daterangepicker-bs3.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/plugins/datepicker/css/datepicker.css' %}" />
    
</head>
<body style="height:100%; width:100%; min-height:100%;"">
    
    <div id="wrapper" >
        <!-- /. NAV TOP  -->
        <nav class="navbar navbar-default navbar-inverse navbar-fixed-top navbar-cls-top" role="navigation" 
                    style="
                        margin-bottom: 0px;
                          ">
           
           <div  class="navbar-header navbar-brand"></div>

           <ul class="nav navbar-right top-nav" 
                        style="
                        margin-right: 50px;
                        ">
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <span class="label label-danger">1</span> 
                    <i class="icon-building"></i><b class="caret"></b></a>
                    <ul class="dropdown-menu message-dropdown">
                        
                        
                        <li class="message-preview">
                            

                            <a>
                                
                                <div class="media" role="submit" name="notif1" id="notif1" value="GGWP">
                                    
                                        <span class="pull-left" >
                                        <div class="btn  btn-circle" role="button" aria-disabled="true" disabled = "disabled">
                                        <i class="{{x.1}}"></i></div>
                                    </span>  
                                    <div class="media-body">
                                        <h5 class="media-heading">
                                            <strong></strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p style="margin-bottom:5px;">It was for the request with:</p> 
                                        <p style="margin-bottom:5px;"></p>      
                                        <p></p>
                                    </div>
                                    <form action="/requisitioner/notifs/" method="post">{% csrf_token %}
                                    <div class="media-body" style="float: right;">
                                        <button class="btn btn-xs btn-info" type="submit" name="d" value="GGut">View Details</button>    
                                    </div>
                                    </form>

                                </div>
                                
                            </a>
                        </li>

                        <li class="message-footer">
                            <a href="/requisitioner/pr">View all Conducted Biddings</a>
                        </li>

                    </ul>
                </li>


                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <span class="label label-danger">1</span> 
                    <i class="icon-file-text"></i><b class="caret"></b></a>
                    <ul class="dropdown-menu message-dropdown">
                        
                        
                        <li class="message-preview">
                            

                            <a>
                                
                                <div class="media" role="submit" name="notif1" id="notif1" value="GGWP">
                                    
                                        <span class="pull-left" >
                                        <div class="btn  btn-circle" role="button" aria-disabled="true" disabled = "disabled">
                                        <i class="{{x.1}}"></i></div>
                                    </span>  
                                    <div class="media-body">
                                        <h5 class="media-heading">
                                            <strong></strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p style="margin-bottom:5px;">It was for the request with:</p> 
                                        <p style="margin-bottom:5px;"></p>      
                                        <p></p>
                                    </div>
                                    <form action="/requisitioner/notifs/" method="post">{% csrf_token %}
                                    <div class="media-body" style="float: right;">
                                        <button class="btn btn-xs btn-info" type="submit" name="d" value="GGut">View Details</button>    
                                    </div>
                                    </form>

                                </div>
                                
                            </a>
                        </li>

                        <li class="message-footer">
                            <a href="/requisitioner/pr">View all Purchase Request</a>
                        </li>

                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        
                        {% if taskNum.0.0 != 0 %}
                            <span class="label label-danger">{{taskNum.0.0}}</span> 
                        {% endif %}
                    
                    <i class="icon-tasks"></i><b class="caret"></b></a>
                    <ul class="dropdown-menu message-dropdown">
                        
                     {% if notifNum.0.0 == 0 %}

                        <li class="message-preview" >
                            
                                <a>
                                <div class="media" >
                                    <span class="pull-left" >
                                        <div class="btn btn-info btn-circle" role="button" aria-disabled="true" disabled = "disabled">
                                        <i class="icon-info"></i></div>
                                    </span>  
                                    <div class="media-body">
                                        <h5 class="media-heading">
                                            <strong>No unprocessed task at the moment</strong>
                                        </h5>
                                    </div>
                                </div>
                            </a>
                            
                        </li>

                        {% endif %}   
                    
                    {% for x in taskDetails %}
                        
                        <li class="message-preview">
                            

                            <a>
                                
                                <div class="media" role="submit" name="notif1" id="notif1" value="GGWP">
                                    
                                        <span class="pull-left" >
                                        <div class="btn btn-{{x.2}} btn-circle" role="button" aria-disabled="true" disabled = "disabled">
                                        <i class="{{x.1}}"></i></div>
                                    </span>  
                                    <div class="media-body">
                                        <h5 class="media-heading">
                                            <strong>{{x.5}}</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p style="margin-bottom:5px;">It was for the request with:</p> 
                                        <p style="margin-bottom:5px;">{{x.3}}</p>      
                                        <p>{{x.4}}</p>
                                    </div>
                                    <form action="/requisitioner/notifs/" method="post">{% csrf_token %}
                                    <div class="media-body" style="float: right;">
                                        <button class="btn btn-xs btn-info" type="submit" name="d" value="{{x.0}}">View Details</button>    
                                    </div>
                                    </form>

                                </div>
                                
                            </a>
                        </li>

                     {% endfor %}   

                        <li class="message-footer">
                            <a href="#">View all Processed Tasks</a>
                        </li>

                    </ul>
                </li>    
                
                <li class="dropdown">

                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">

                        {% if notifNum.0.0 != 0 %}
                            <span class="label label-danger">{{notifNum.0.0}}</span> 
                        {% endif %}
                        
                    
                    <i class="icon-bell"></i><b class="caret"></b></a>
                    
                    <ul class="dropdown-menu message-dropdown">
                        
                        {% if notifNum.0.0 == 0 %}

                        <li class="message-preview" >
                            
                                <a>
                                <div class="media" >
                                    <span class="pull-left" >
                                        <div class="btn btn-info btn-circle" role="button" aria-disabled="true" disabled = "disabled">
                                        <i class="icon-info"></i></div>
                                    </span>  
                                    <div class="media-body">
                                        <h5 class="media-heading">
                                            <strong>No unread notification at the moment</strong>
                                        </h5>
                                    </div>
                                </div>
                            </a>
                            
                        </li>

                        {% endif %}

                       {% for x in notifDetails %}

                       <li class="message-preview" >
                            
                                <a>
                                <div class="media" >
                                    <span class="pull-left" >
                                        <div class="btn btn-{{x.2}} btn-circle" role="button" aria-disabled="true" disabled = "disabled">
                                        <i class="{{x.1}}"></i></div>
                                    </span>  
                                    <div class="media-body">
                                        <h5 class="media-heading">
                                            <strong>{{x.5}}</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p style="margin-bottom:5px;">{{x.3}}</p>      
                                        <p>{{x.4}}</p>
                                    </div>
                                    <form action="/requisitioner/notifs/" method="post">{% csrf_token %}
                                    <div class="media-body" style="float: right;">
                                        <button class="btn btn-xs btn-info" type="submit" name="d" value="{{x.0}}">View Details</button>    
                                    </div>
                                    </form>
                                </div>
                            </a>
                            
                        </li>
                       
                       {% endfor %}
                        
                         
                        <li class="message-footer">
                            <a href="#">View all Notifications</a>
                        </li>

                    </ul>
                </li>
               
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle"  data-toggle="dropdown"><i class="icon-user"></i><b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="#"><i class="fa fa-fw fa-user"></i> Profile</a>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-fw fa-shopping-cart"></i> My Requests</a>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-fw fa-th-list"></i> My Acct. Items</a>
                        </li>
                        
                        <li class="divider"></li>
                        <li>
                            <a href="/login"><i class="fa-fw icon-signout"></i> Log Out</a>
                        </li>
                    </ul>
                </li>
            </ul>
             <div class="navbar-default navbar-side" style="margin-top: 50px;" role="navigation">
              <div class="sidebar-collapse"> 
                <ul class="nav" id="main-menu">
                    <li style="
                         height: 140px;
                        ">
                        <div class="user-img-div">

                            <a href="requisitioner_profile.html"><img src="{% static 'assets/img/user.jpeg' %}" class="img-circle" /></a>

                            <div class="inner-text">
              <p></p>
                                <a href="requisitioner_profile.html" class = "inner-text">{{lname}}, {{fname}}</a>
                            <br />
                                <small>{{designation}}</small>
                
                              
              </div>
                        </div>

                    </li>

                   <li>
                        <a href="/procurement_office"><i class="fa fa-dashboard "></i>Dashboard</a>
                    </li>
                     <li>
                        <a  href="#"><i class="icon-briefcase"></i>Purchase Req. & Ordr.<span class="fa arrow"></span></a>
                         <ul class="nav nav-second-level">
                            <li>
                                <a href="/procurement_office/create_po"><i class="icon-pencil"></i>Create P.O.</a>
                            </li>
                            <li>
                                <a href="/procurement_office/po"><i class="fa fa-truck"></i>Purchase Orders</a>
                            </li>
                            <li>
                                <a  href="/procurement_office/pr"><i class="icon-shopping-cart"></i>Purchase Req.</a>
                            </li>
                        </ul>
                    </li>
                    
                    <li>
                        <a  href="#"><i class="icon-envelope-alt"></i>Quotations and Abstracts<span class="fa arrow"></span></a>
                         <ul class="nav nav-second-level collapse in">

                         
                           <li>
                               <a href="/procurement_office/add_quotation"><i class="icon-pencil"></i>New Quotation</a>
                           </li>
                           <li>
                              <a class="active-menu-proc" href="/procurement_office/add_abstract"><i class="icon-pencil"></i>Create Abstract</a>
                            </li>

                            <li>
                                <a href="/procurement_office/quotations"><i class="fa fa-reorder "></i>All Quotations</a>
                            </li>
                            <li>
                                <a href="/procurement_office/abstract"><i class="fa fa-reorder "></i>All Abstacts</a>
                            </li>
                            
                        </ul>
                    </li>
                    <li>
                        <a  href="#"><i class="icon-building"></i>BAC Records<span class="fa arrow"></span></a>
                         <ul class="nav nav-second-level">
                            <li>
                                <a href="/procurement_office/add_bid"><i class="icon-edit"></i>Record a Bidding</a>
                            </li>
                            <li>
                                <a href="/procurement_office/add_contract"><i class="icon-edit"></i>New Contract</a>
                            </li>
                            <li>
                                <a href="/procurement_office/bids"><i class="icon-list-alt"></i>All Biddings</a>
                            </li>
                            
                        </ul>
                    </li>
                    
                     <li>
                        <a  href="#"><i class="icon-group"></i>Suppliers</a>
                    </li>
          
                </ul>
            </div>

</div>
        </nav>
        <!-- /. NAV SIDE  -->
        <div id="page-wrapper">
            <div id="page-inner">
            <div class="panel panel-body" style="
                 margin-bottom: 0px;
                 padding-left: 2px;
                 font-size: 25px;
                 padding-top: 10px;
                 padding-bottom: 0px;
                ">

                <div>
                    Create an Abstract of Canvass
                </div>
                  <hr>


               </div>

               <div class="form-group">
                  <div class="header-right" style="padding-right: 40px;">
                                                                
                        <div style="display: inline; font-weight: 400;  font-size: 18px;">
                             Canvass Number: 
                        </div>
                                                                
                        <div id="total" value="0" class="panel panel-default" style="display: inline; font-size: 25px;  font-weight: 400; padding:10px;">***-**
                         </div>
                     </div> 

               </div> 

               <div class="panel panel-body" style="
                 margin-bottom: 0px;
                 padding-left: 2px;
                 font-size: 18px;
                 padding-top: 0px;
                 padding-bottom: 0px;
                ">

                <div>
                    Canvass Information
                </div>
                  <hr>


               </div>
               
               <div class="panel panel-body">
            
            <form class="form-horizontal">

                <div class="form-group">
                    <label for="text1" class="control-label col-lg-4">Quotation Number: </label>

                    <div class="col-lg-5">
                        <input type="text" id="quotNum"  class="form-control">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="text1" class="control-label col-lg-4">Opening Date: </label>

                    <div class="col-lg-5">
                        <input type="text" id="openingDate"  class="form-control">
                    </div>
                </div>
                <div class="form-group">
                    <label for="text1" class="control-label col-lg-4">Opening Time: </label>

                    <div class="col-lg-5">
                        <input type="text" id="openingTime"  class="form-control">
                    </div>
                </div>
            </form>
            </div>
                <div class="panel panel-body" style="
                 margin-bottom: 0px;
                 padding-left: 2px;
                 font-size: 18px;
                 padding-top: 0px;
                 padding-bottom: 0px;
                ">
                <div>
                    Participating Bidders
                </div>
                  <hr style="margin-bottom:0px;">


               </div>
            <div class="table-responsive">
                                <div id="dataTables-example_wrapper" class="dataTables_wrapper form-inline" role="grid">
                                    
                        <div class="col-md-12" style="
                                    margin-top: 0px; 
                                    padding-left: 0px;
                                    padding-right: 0px;
                                    ">
                                <div class="panel">
                            <div class="table-responsive">
                                <table id="myTable" class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Company Name</th>
                                            <th>Address</th>
                                            <th>Company Representative</th>
                                            <th class="text-center">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="compTable">
                                   
                                    </tbody>
                                </table>
                                
                                <!--<button class="btn btn-xs btn-success" role= "button" aria-disabled="true" data-toggle="modal"  data-target="#newReg"><i class="icon-plus"></i> Add Supplier Information</button>-->
                            
                            </div>
                        </div>
                            

                    </div>


                    </div>
                                </div>

                                <hr>
            <form id="addForm" action="" method="POST">{% csrf_token %}
                <div class="form-group">
                  <div class="header-right" style="padding-right: 40px; padding-top:20px;">
                         <button id="view" class="btn btn-info" role ="button" aria-disabled="true"><i class="icon-file"></i> View Document</button>
                         <button id="send" class="btn btn-success" role= "submit" aria-disabled="true"><i class="icon-ok"></i> Create Abstract</button>
                   </div> 

               </div> 
            </form>

                <!-- /. ROW  -->
                
                    </div>
                </div>

<!--// =======================================  Modal  ====================================//-->
            <!--class="col-lg-12"-->
        <div id="dd">
            <div class="modal fade" id="newReg" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                 <div class="modal-dialog modal-lg">
                      <div class="modal-content">
                            <div class="modal-header">
                                   <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                     <h4 class="modal-title" id="H4">Enter the Company's Bids for the Items</h4>
                            </div>
                            <div class="modal-body">
                                    <form role="form">
<!--// =======================================  Test  ====================================//-->
            
            <div class="panel panel-body" style="
                 margin-bottom: 0px;
                 padding-left: 0px;
                 font-size: 15px;
                 padding-top: 0px;
                 padding-bottom: 0px;
                ">
                <div>
                    <label id="comLabel" class="control-label"></label>
                </div>
                  <hr style="margin-bottom:0px;">


               </div>

               <form class="form-horizontal">
                </form>

                <div class="table-responsive">
                        <div id="dataTables-example_wrapper" class="dataTables_wrapper form-inline" role="grid">
                                    
                        <div class="col-md-12" style="
                                    margin-top: 0px; 
                                    padding-left: 0px;
                                    padding-right: 0px;
                                    padding-bottom: 20px;
                                    ">
                                <div class="panel">
                            <div class="table-responsive">
                                <table id="myTable" class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Item Requested</th>
                                            <th>Bidded Item Description</th>
                                            <th class="text-center">Bidded Price</th>
                                        </tr>
                                    </thead>
                                    <tbody id="itemListTable">
                                    
                                    </tbody>
                                </table>
                                
                                <!--<button class="btn btn-xs btn-success" role= "button" aria-disabled="true" data-toggle="modal"  data-target="#newReg"><i class="icon-plus"></i> Add Supplier Information</button>-->
                            
                            </div>
                        </div>
                            

                    </div>


                    </div>
                </div>

                <div class="panel panel-body" style="
                 margin-bottom: 0px;
                 padding-left: 0px;
                 font-size: 15px;
                 padding-top: 0px;
                 padding-bottom: 0px;
                ">
                <div>
                    <label class="control-label">Prepared Terms</label>
                </div>
                  <hr style="margin-bottom:0px;">


               </div> 
                
                <div class="panel panel-body" style="padding-top:0px;">
                 <form class="form-horizontal">

                <div class="form-group">
                    <label for="text1" class="control-label col-lg-4">Warranty Period: </label>

                    <div class="col-lg-5">
                        <input autofocus type="text" id="warrranty"  class="form-control">
                    </div>
                </div>
                <div class="form-group">
                    <label for="text1" class="control-label col-lg-4">Delivery Period: </label>

                    <div class="col-lg-5">
                        <input type="text" id="delivery"  class="form-control">
                    </div>
                </div>
                <div class="form-group">
                    <label for="text1" class="control-label col-lg-4">Price Validity: </label>

                    <div class="col-lg-5">
                        <input type="text" id="validity"  class="form-control">
                    </div>
                </div>
                </form>
                </div>           

<!--// =======================================  Test  ====================================//-->
                                       

                                    </form>
                                    </div>

                                <div class="modal-footer">
                                    <button id="saveBidList" type="button" role="button" class="btn btn-success" >Save</button>
                                </div>

                            </div>
                           
                        </div>
                 </div>
            </div>
        </div>
<!--// ======================================= End of Modal Frame ====================================//-->
            
            </div>
            <!-- /. PAGE INNER  -->
        </div>
        <!-- /. PAGE WRAPPER  -->
    </div>
    <!-- /. WRAPPER  -->
    <div id="footer-sec" >
      &copy; Mindanao State University
    </div>
    <!-- /. FOOTER  -->
    <!-- SCRIPTS -AT THE BOTOM TO REDUCE THE LOAD TIME-->
    <!-- JQUERY SCRIPTS -->
    <script src="{% static 'assets/js/jquery-1.10.2.js' %}"></script>
    <!-- BOOTSTRAP SCRIPTS -->
    <script src="{% static 'assets/js/bootstrap.js' %}"></script>
    <!-- METISMENU SCRIPTS -->
    <script src="{% static 'assets/js/jquery.metisMenu.js' %}"></script>
    <!-- CUSTOM SCRIPTS -->
    <script src="{% static 'assets/js/custom.js' %}"></script>
   
    <script src="{% static 'assets/plugins/datepicker/js/bootstrap-datepicker.js' %}"></script>

    
    <script type="text/javascript">

       var total = 0;
       var theArray = {};
       var toDjangoArray = {};
       var theArrayIndex = 0; 
       var itemBidList = {};
       var bidItemList = {};
       var bidPricesList = {};    
       
       var url = '';
       

        var qoutNum =''
        var prNum = ''
        var projLoc = ''
        var projName = ''
        var canv = ''



    document.getElementById("send").onclick = function () {
        
        prNum = document.getElementById("prNum").value;
        projLoc = document.getElementById("projLoc").value;
        projName = document.getElementById("projName").value;
        canv = document.getElementById("canv").value;


        if (prNum === ""|| projName === ""|| projLoc === ""|| canv === "") {
                alert("Provide all Data First");
                return false;
        } else {

            if (theArrayIndex == 0) {
                alert("No Suppliers added")
                return false;
            } else {
                return true;
            }

            
        }
    };
    
    var numB = 0


   

    $('#quotNum').keyup(function (e) {
        if (document.getElementById("quotNum").value == '') {
            document.getElementById("total").innerHTML = '***-**'
        } else {
            document.getElementById("total").innerHTML = document.getElementById("quotNum").value
            
            if (document.getElementById("quotNum").value.length == 6) {
                $.ajax({
                    type: 'POST',
                    url:'/procurement_office/getReqComp/',
                    data:{
                    
                        'quotNum': document.getElementById("quotNum").value,
                        csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                   
                    },

                    success: function(response) {


                        if (response === "nonExisting") {
                            alert("Quotation not Found");
                            $('#quotNum').val('');
                            document.getElementById("total").innerHTML = '***-**';

                        } else {

                            if (response === "existing") {

                                alert("Abstract has already been prepared");
                                $('#quotNum').val('');
                                document.getElementById("total").innerHTML = '***-**';
                            
                            } else {

                                document.getElementById("compTable").innerHTML = "";

                                for(var key in response) {
                                    var value = response[key];
                                    
                                    var t = '';
                                        var tr = '<tr id="'+value['compid']+'_row">';
                                            tr += '<td>'+value['name']+'</td>';
                                            tr += '<td>'+value['address']+'</td>';
                                            tr += '<td>'+value['rep']+'</td>';
                                            tr += '<td class="text-center" id="'+value['compid']+'_act">';
                                            tr += '<button id="'+value['compid']+'" value="'+value['name']+'" class="btn btn-xs btn-primary" type="button" role= "button" aria-disabled="true" data-toggle="modal" data-target="#newReg">Enter Com. Bids</button>';
                                            tr +='</td>';
                                            tr += "</tr>";
                                            t += tr;
                                
                                document.getElementById("compTable").innerHTML += t;
                
                                }
                            }
                        }

                     
                    }

            });
            
            }
        }
        
    })


    $('#compTable').on('click','button', function (e) {
        
        var id = this.id;
        var value = document.getElementById(id).value
        document.getElementById("comLabel").innerHTML = value+"'s bids of items prices"
        $('#saveBidList').val(id)
        $.ajax({
                    type: 'POST',
                    url:'/procurement_office/getReqQItems/',
                    data:{
                    
                        'quotNum': document.getElementById("quotNum").value,
                        csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                   
                    },

                    success: function(response) {

                        document.getElementById("itemListTable").innerHTML = "";
                        
                        for(var key in response) {
                            var value = response[key];
                            var t = '';
                                var tr = '<tr id="'+value['description']+'_row">';
                                    tr += '<td "">'+value['description']+'</td>';
                                    tr += '<td>';
                                    tr += '<input class="bidsItem form-control" type="text" id="'+value['description']+'" style="width:100%">';
                                    tr +='</td>';
                                    tr += '<td class="text-right col-md-3">';
                                    tr += '<input class="bidsInput form-control " type="text" id="'+value['description']+'" style="width:100%">';
                                    tr +='</td>';
                                    tr += "</tr>";
                                    t += tr;

                        document.getElementById("itemListTable").innerHTML += t;
        
                        }
                    }

            });
        

    });

    $('#saveBidList').click(function (e) {

        if ($('#warrranty').val() === ''||$('#delivery').val() === ''||$('#validity').val()==='') {
                    alert("Provide all the Data Needed");
        } else {
            
            var btnID = $('#saveBidList').val();
            
            $('.bidsInput').each(function() {
                var grade =  $(this).val();
                bidPricesList[this.id] = grade;
            });
            $('.bidsItem').each(function() {
                var grade =  $(this).val();
                if (grade === '') {
                    bidItemList[this.id] = 'Non-Defiened Product';
                } else {
                    bidItemList[this.id] = grade;
                }
                
            });

            for (var i in bidPricesList) {
                
                var bidItemDescrip = bidItemList[i];
                var bidPrice = bidPricesList[i];
                itemBidList[i] = [bidItemDescrip, bidPrice];

            }
            
            toDjangoArray[btnID] =  {'itemBidList': itemBidList,
                                     'warranty':$('#warrranty').val(),
                                     'delivery':$('#delivery').val(),
                                     'validity':$('#validity').val(),
                                    }
                             
            itemBidList = {};                                    
           
            resetModalData();
            document.getElementById(btnID).innerHTML = "Bids Saved"
            $("#"+btnID).attr('class', 'btn btn-xs btn-success');
            $('#newReg').modal('toggle');

            // var data = $('#id').attr('value');
            // var data = $('#id').val();

        }

    });
      $('#openingDate').focusin(function() {
       $('#openingDate').datepicker({
                    format: "yyyy-mm-dd"
        });
   })
    

    function resetModalData() {
        $('#warrranty').val('');
        $('#delivery').val('');
        $('#validity').val('');
    }

   

    $(document).on('submit', '#addForm', function(e){
            e.preventDefault();
            
            
            $.ajax({
                type: 'POST',
                url:'/procurement_office/addAbstractOfCanvass/',
                data:{
                    
                    'theDjangoArray': JSON.stringify(toDjangoArray),
                    'quotNum': $('#quotNum').val(),
                    'openingDate': $('#openingDate').val(),
                    'openingTime': $('#openingTime').val(),
                    csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                   
                },

                    success: function(response) {
                        alert("Transaction Complete");
                        location.reload();
                        //window.location.href = "/requisitioner/pr/";
                    }

            });


    });


    function comaSegregator(input){

        var output = "";
        var indexCheck = 1;
        for (var i = input.length - 1; i >= 0; i--) {
            
            if (indexCheck%3 === 0) {

                if (i === 0) {
                     output = input[i] + output;
                    indexCheck = indexCheck + 1;

                } else {
                     output = ", " + input[i] + output;
                    indexCheck = indexCheck + 1;
                }
                   
            } else {
                output = input[i] + output;
                indexCheck = indexCheck + 1;
            }
        }

        return(output);
    }

    </script>


    <script type="text/javascript">
        
         $(document).ready(function () {
                

                var someDate = new Date();
                var numberOfDaysToAdd = 15;

                
                someDate.setDate(someDate.getDate() + numberOfDaysToAdd);

                var dateToDisplay = someDate.getFullYear()+ '-' + 
                                    setSingleDigitToDouble(someDate.getMonth()+1)+ '-' + 
                                    setSingleDigitToDouble(someDate.getDate());
                    
                $('#openingDate').val(dateToDisplay);
            
            });

         function setSingleDigitToDouble(input) {
            
            
            var outputData = "" + input;
            
            
            if (outputData.length === 1) {
                outputData = "0"+input;
            }

            return outputData;

         }

    </script>


</body>
</html>
