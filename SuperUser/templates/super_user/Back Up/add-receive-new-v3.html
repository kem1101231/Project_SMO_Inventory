{% extends  baseSource %}

{% load staticfiles %}
{% block content %}
        <div id="page-wrapper">

            <div style="   
                                     display:inline;
                                     float:right; 
                                     right:0; 
                                     padding-top:10px;
                                     margin-top:40px;
                                     margin-bottom:0px;
                                     padding-bottom: 0px;
                                     padding-right:20px;
                                     display:none;
                                     ">

                      <form action="" method="post">{% csrf_token %}
                           <div >
                                <button class="btn btn-success" type="button" role ="button" aria-disabled="true" id="approveButton" name="approveButton" value="{{pageData1.0.0}}" style="margin-right:6px;"  data-toggle="modal"  data-target="#editReg"><i class="icon-ok"></i> Save Delivery Information</button>
                                
                      </div>

                      </form>                  
                    
                       
                       
            </div>
            <form id="theReqData" action="" method="POST">{% csrf_token %}
            <div class="panel-body" style="
                 margin-bottom: 0px;
                 padding-left: 15px;
                 font-size: 25px;
                 padding-top: 10px;
                 padding-bottom: 0px;
                 margin-top:50px; 

                ">
                <div>
                 <span name="reqNum" id="reqNum" value="{{pageData1.0.0}}">Receive Newly Delivered Items</span>
                 
                </div>
                 
               </div>
               </form>




            <div id="page-inner" style="margin-top:0px; background-color: #ddd!important;">
             
                <hr>
                
                <div id="displayDiv">
                        <div class="col-lg-12" >
                                     <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title"> Enter the Collected Transaction-Informations</h3>
                                        </div>
                                         <div class="panel-body">
                                            <form class="form-horizontal" action="" method="POST">{% csrf_token %}

                                                <div id="descripDiv" class="form-group">
                                                        <label for="text1" class="control-label col-lg-4">Invoice Number: </label>
                                            
                                                    <div class="col-lg-8">
                                                       <input type="text" id="receiptnum"  class="form-control" autofocus>
                                                    </div>
                                                </div>
                                                <div class="form-group" style="margin-bottom:10px;">
                                                        <label for="text1" class="control-label col-lg-4">Receipt Date: </label>
                                                        
                                                    <div class="col-lg-8">
                                                         <input type="text" id="recdate"  class="form-control ui1" >
                                                    </div>
                                                    
                                                </div>

                                                <div class="form-group" style="margin-bottom:10px;">
                                                    <label for="text1" class="control-label col-lg-4">Inspection Officer: </label>
                                
                                                    <div class="col-lg-8">
                                                        <input type="text" id="insofficer" list="insOffList" class="form-control ui1" >
                                                        <datalist id="insOffList">
                                                        </datalist>
                                                    </div>
                                                </div>
                                                <div class="form-group" style="margin-bottom:10px;">
                                                    <label for="text1" class="control-label col-lg-4">Inspection Date: </label>
                                            
                                                    <div class="col-lg-8">
                                                        <input type="text" id="insdate"  class="form-control ui1" >
                                                    </div>
                                                </div>
                                                <div class="form-group" style="margin-bottom:10px;">
                                                    <label for="text1" class="control-label col-lg-4">Property Officer: </label>
                                            
                                                    <div class="col-lg-8">
                                                        <input type="text" id="receiveoff" list="recOffList"  class="form-control ui1">
                                                        <datalist id="recOffList">
                                                        </datalist>
                                                    </div>
                                                </div>
                                                <div class="form-group" style="margin-bottom:10px;">
                                                    <label for="text1" class="control-label col-lg-4">Date Accepted: </label>
                                            
                                                    <div class="col-lg-8">
                                                        <input type="text" id="deldate"  class="form-control ui1" >
                                                    </div>
                                                </div>
                                           
                                            </form>
                                        </div>
                                    </div>
                                </div>

                     <div class="col-lg-12" >
                                     <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">Check for Delivered Item/s' Quantity </h3>
                                        </div>
                                         <div class="panel-body">
                                         <form action="" method="POST">  {% csrf_token %}                           
                                         <div class="panel-body" style="padding:0px; margin:0px;">
         <div class="form-group col-lg-12">
                    <label for="text1" class="control-label col-lg-4 text-right">P.O. Number: </label>

                    <div class="col-lg-5">
                    <div>
                          <input type="text" id="ponum_field"  class="form-control ui2">

                    </div>
                      
                    <div class="checkbox">
                                <label>
                                    <div class="checker hover"><span><input id="chck" class="uniform" type="checkbox" value="option2"></span></div> This is a Non-MSU Ordered Items
                                </label>
                     </div>


                    </div>
                    
                </div>
                <div class="form-group col-lg-12">
                    <label for="text1" class="control-label col-lg-4 text-right">P.O. Date: </label>

                    <div class="col-lg-5">
                    <div>
                         
                            <input type="text" id="podateF"  class="form-control ui1"/ >
                         

                    </div>

                    </div>
                    
                </div>
                <div class="form-group col-lg-12">
                    <label for="text1" class="control-label col-lg-4 text-right">Supplier: </label>

                    <div class="col-lg-5">
                    <div>
                          <input type="text" id="suppF" list="compSeacrhList"  class="form-control ui2">
                          <datalist id="compSeacrhList">
                          </datalist>

                    </div>

                    </div>
                    
                </div>
                <div class="form-group col-lg-12" id="expDateDiv">
                    <label for="text1" class="control-label col-lg-4 text-right">Expected Delivery Date: </label>

                    <div class="col-lg-5">
                    <div>
                         
                            <input type="text" id="expdeldateF"  class="form-control ui1"/ >
                         

                    </div>

                    </div>
                    
                </div>

     </div>
     </form>


                                        </div>
                                    </div>
                                </div>  


                <div class="col-lg-12">
               <div class="panel panel-default">
                        <div class="panel-heading">Items to Receive</div>
                        <div class="panel-body">
                            
                             <div class="table-responsive">
                                <table id="myTable" class="table table-hover table-bordered">
                                    <thead id="tablehead">
                                        <tr>
                                            <th class="text-center">Item No.</th>
                                            <th>Decription</th>
                                            <th class="text-center">Quantity</th>
                                            <th class="text-center">Unit</th>
                                            <th class="text-center">Unit Cost</th>
                                            <th class="text-center">Total Cost</th>
                                            <th class="text-center">Delivered QTY.</th>
                                            <th class="text-center">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="table">
                                        
                                    </tbody>
                                </table>
                                
                                <button id="addItemBTN" class="btn btn-sm btn-success" role= "button" type="button" aria-disabled="true" ><i class="icon-plus"></i> Add Item to List</button>
                            
                            </div>

                        </div>
                    </div>
                </div>
              








                </div>

               <div class="col-lg-12" >
                                     <div class="panel panel-default">
                                         <div class="panel-body" >
                                     <div style="float:right; 
                                     right:0;">
                                         <button id="prev_btn" class="btn btn-primary" style="display:none;"> <i class="icon-arrow-left"></i> Previous Step</button> 
                                         <button id="nxt_btn" class="btn btn-primary" >Next Step <i class="icon-arrow-right"></i></button>
                                     </div>
                                            
                                        </div>
                                    </div>
                                </div>
                  
                </div>    

                </div>

<!-- ======================================================= Display UI ===================================================== -->

  <div id="detailsFrame" style="display:none;">
                     <div class="col-lg-4" >
                                     <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">Delivery Information</h3>
                                        </div>
                                        
                                        <div class="panel-body" style="height:232px; padding-left:20px;">
                                            <div class="form-group">
                                            <div style="padding-left: 2px; width:100%;">
                                                <div class="col-lg-6 dataFont2" >
                                                    PO Reference:  
                                                </div>
                                                <div  class="col-lg-6 dataFont1">
                                                <span id="poRefDisplay">000-00</span>
                                                </div>
                                            </div> 
                                        </div>
                                        <div class="form-group">
                                            <div style="padding-left: 2px; width:100%; ">
                                                <div class="col-lg-6 dataFont2" >
                                                    Expected By:  
                                                </div>
                                                <div id="dateInspectedDisplay2" class="col-lg-6 dataFont1" >
                                                    April 27, 2017
                                                </div>
                                            </div> 
                                        </div>
                                        <div class="form-group">
                                            <div style="padding-left: 2px;  width:100%;">
                                                <div class="col-lg-6 dataFont2">
                                                    Invoice No.:  
                                                </div>
                                                <div id="invNoDisplay" class="col-lg-6 dataFont1" >
                                                   ***-***-****
                                                </div>
                                            </div> 
                                        </div> 
                                        <div class="form-group">
                                            <div style="padding-left: 2px; width:100%; ">
                                                <div class="col-lg-6 dataFont2" >
                                                     Receive Date:  
                                                </div>
                                                <div id="dateReceivedDisplay" class="col-lg-6 dataFont1" >
                                                    April 27, 2017
                                                </div>
                                            </div> 
                                        </div>
                                        <div class="form-group">
                                            <div style="padding-left: 2px; width:100%; ">
                                                <div class="col-lg-6 dataFont2" >
                                                    Inspection Date:  
                                                </div>
                                                <div id="dateInspectedDisplay" class="col-lg-6 dataFont1" >
                                                    April 27, 2017
                                                </div>
                                            </div> 
                                        </div>
                                        
                                        <div class="form-group">
                                            <div style="padding-left: 2px; width:100%;">
                                                <div class="col-lg-6 dataFont2" >
                                                 
                                                </div>
                                                <div class="col-lg-4 dataFont1">
                                                  
                                                </div>
                                            </div> 
                                        </div>
                                        
                                        </div>
                                    </div>
                                </div>

                                <div class="col-lg-3" style="padding-left:0px;">
                                     <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">Acceptance Summary</h3>
                                        </div>
                                        <div class="panel-body" style="height:232px; padding-left:20px;">
                                        
                                        <div class="form-group">
                                            <div style="padding-left: 2px; width:100%; ">
                                                <div class="col-lg-6 dataFont2" >
                                                    IAR No.:  
                                                </div>
                                                <div id="iarNumDisplay" class="col-lg-6 dataFont1" style="font-size: 25px;" >
                                                    {{pageData1.0.0}}
                                                </div>
                                            </div> 
                                        </div>
                                        <div class="form-group">
                                            <div style="padding-left: 2px; width:100%;">
                                                <div class="col-lg-9 dataFont2" >
                                             
                                                </div>
                                                <div  class="col-lg-3 dataFont1">
                                                 
                                                </div>
                                            </div> 
                                        </div>
                                         <div class="form-group">
                                            <div style="padding-left: 2px; width:100%;">
                                                <div class="col-lg-9 dataFont2" >
                                             
                                                </div>
                                                <div class="col-lg-3 dataFont1">
                                                 
                                                </div>
                                            </div> 
                                        </div>
                                         
                                         <div class="form-group">
                                            <div style="padding-left: 2px; width:100%;">
                                                <div class="col-lg-6 dataFont2" >
                                                    Qty Received:  
                                                </div>
                                                <div id="receiveQuan" class="col-lg-6 dataFont1">
                                                   15
                                                </div>
                                            </div> 
                                        </div>
                                        <div class="form-group">
                                            <div style="padding-left: 2px; width:100%;">
                                                <div class="col-lg-9 dataFont2" >
                                             
                                                </div>
                                                <div class="col-lg-3 dataFont1">
                                                 
                                                </div>
                                            </div> 
                                        </div>
                                        <div class="form-group">
                                            <div style="padding-left: 2px; width:100%;">
                                                <div class="col-lg-9 dataFont2" >
                                             
                                                </div>
                                                <div class="col-lg-3 dataFont1">
                                                 
                                                </div>
                                            </div> 
                                        </div>

                                        <div class="form-group" >
                                            <div style="padding-left: 2px;  width:100%; margin-bottom:12px;">
                                                <div class="col-lg-6 dataFont2" >
                                                    Total Cost:  
                                                </div>
                                                <div id="missingQuan" class="col-lg-6 dataFont1">
                                                    00
                                                </div>
                                            </div> 
                                        </div>

                                        
                                        </div>
                                    </div>
                                </div>
                                 <div class="col-lg-5" style="padding-left:0px;">
                                     <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">Activity Summary</h3>
                                        </div>
                                        <div class="panel-body" style="height:232px; padding-left:20px;">
                                        
                                    
                                        
                                           <div class="form-group">
                                            <div style="padding-left: 2px; width:100%;">
                                                <div class="col-lg-5 dataFont2" >
                                                    Assesment:  
                                                </div>
                                                <div id="assesF" class="col-lg-6 dataFont1">
                                                   <label class="label label-success" id="asse">On Time</label>
                                                </div>
                                            </div> 
                                        </div>
                                       
                                       
                                        <div class="form-group" >
                                            <div style="padding-left: 2px;  width:100%; margin-bottom:12px;">
                                                <div class="col-lg-5 dataFont2" >
                                                   
                                                </div>
                                                <div class="col-lg-6 dataFont1">
                                                   
                                                </div>
                                            </div> 
                                        </div> 
                                          <div class="form-group">
                                            <div style="padding-left: 2px;  width:100%;">
                                                <div class="col-lg-5 dataFont2">
                                                    Supplier:  
                                                </div>
                                                <div id="suppNameDisplay" class="col-lg-6 dataFont1" >
                                                   Star Bright Office Depot
                                                </div>
                                            </div> 
                                        </div> 
                                         
                                        <div class="form-group" >
                                            <div style="padding-left: 2px;  width:100%; margin-bottom:12px;">
                                                <div class="col-lg-5 dataFont2" >
                                                    Received By; 
                                                </div>
                                                <div class="col-lg-6 dataFont1" id="recOffDis">
                                                    Rustal Ellion
                                                </div>
                                            </div> 
                                        </div> 
                                       <div class="form-group">
                                            <div style="padding-left: 2px;  width:100%;">
                                                <div class="col-lg-5 dataFont2">
                                                     Inspected By:
                                                </div>
                                                <div class="col-lg-6 dataFont1" id="insOffDis">
                                                    Julieta  Juris
                                                </div>
                                            </div> 
                                        </div> 
                                        
                                           
                                        </div>
                                    </div>
                                </div>

                               
                            <div class="col-lg-12" style="display: inline;">
                                
                                   

                                    <!--  -->
                                    
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title text-center">Items Received</h3>
                                        </div>
                                        <div class="panel-body">
                                            <div class="table-responsive">
                                            <table class="table table-striped table-bordered table-hover" id="theTable">
                                                <thead>
                                                    <tr>
                                                        <th class="text-center">Item No.</th>
                                                        <th>Desciption</th>
                                                        <th class="text-center">Quantity</th>
                                                        <th class="text-center">Unit</th>
                                                        <th class="text-center">Unit Cost</th>
                                                        <th class="text-center">Total Cost</th>
                                                        <th class="text-center"  style="width: 120px;">Delivered Qty.</th>
                                                        
                                                    </tr>
                                                </thead>
                                                <tbody id="receivedItemsList">
                                                    
                                                </tbody>
                                            </table>
                                        </div>
                                            
                                        </div>
                                    </div>
                                
                                <!-- -->

                            </div>
            


                </div>

<!-- ================================================================================================================ -->



<!-- ============================================== Wizard Modal ===================================================  -->
      
          
                        <div class="modal fade" id="receivePop" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                <div id="modalFrame" class="modal-dialog modal-lg">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                            <h4 class="modal-title" id="H4">Provide the following delivery data</h4>
                                        </div>
                                        <div id="modalDisplay" class="modal-body">
                                            
                                        </div>
                                        <div class="modal-footer">
                                            <button id="prev2" type="button" class="btn btn-primary" style="visibility:hidden">Previous Step</button><button id="saveInfo" type="button" class="btn btn-primary" >Next Step</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                  
<!-- ==============================================================================================================  -->
<!-- ============================================== Wizard Modal ===================================================  -->
      
          
                        <div class="modal fade" id="jOption" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                <div id="modalFrame" class="modal-dialog modal-sm">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                            <h4 class="modal-title" id="joptionTitle"></h4>
                                        </div>
                                        <div  class="modal-body">
                                            <input type="text" name="inputField" id="inputField" class="form-control">
                                        </div>
                                        <div class="modal-footer">
                                            <button id="jOptionSave" type="button" class="btn btn-success">Save</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                  
<!-- ==============================================================================================================  -->
<!-- ===================================================   Modal ==================================================================================  -->
           
                       <div class="modal fade" id="transComp" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog ">
                                <div class="modal-content ">
                                   
                                    
                                    <div class="modal-body ">

                                        <div class="media" role="submit" name="notif1" id="notif1" value="GGWP">
                                    
                                            <span class="pull-left" >
                                                <div class="btn btn-success btn-lg btn-circle" role="button" aria-disabled="true" disabled = "disabled">
                                                    <i class="icon-ok"></i></div>
                                    </span>  
                                    <div class="media-body">
                                        <h5 class="media-heading" style="margin-top:10px;">
                                            <strong>Items received and recorded</strong>
                                        </h5>
                                        <hr>
                                        
                                        <p style="margin-bottom:10px;">The Newly Delivered items has been recoreded</p>
                                        <p style="margin-bottom:10px;">The items are now available for PAR once the checking of documents is complete</p>  
                                    </div>
                                    

                                </div>
                                        
                                    </div>
                                        
                                    <div class="modal-footer">
                                            <button id="sentNotif" data-dismiss="modal" type="submit" class="btn btn-info">OK</button>
                                    </div>
                                </div>
                            </div>
                        </div>

<!-- ===================================================   Modal ==================================================================================  -->
<!-- ===================================================   Modal ==================================================================================  -->
           
                       <div class="modal fade" id="transComp2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog ">
                                <div class="modal-content ">
                                   
                                    
                                    <div class="modal-body ">

                                        <div class="media" role="submit" name="notif1" id="notif1" value="GGWP">
                                    
                                            <span class="pull-left" >
                                                <div class="btn btn-success btn-lg btn-circle" role="button" aria-disabled="true" disabled = "disabled">
                                                    <i class="icon-spinner"></i></div>
                                    </span>  
                                    <div class="media-body">
                                        <h5 class="media-heading" style="margin-top:10px;">
                                            <strong>Generating Report Document</strong>
                                        </h5>
                                        <hr>
                                        
                                        <p style="margin-bottom:10px;">The system is currently requesting for the document of this report</p>
                                        <p style="margin-bottom:10px;">Please do not close this modal until the dowload starts</p>
                                    </div>
                                    

                                </div>
                                        
                                    </div>
                                        
                                    <div class="modal-footer">
                                            <button id="sentNotif2" data-dismiss="modal" type="submit" class="btn btn-info">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>

<!-- ===================================================   Modal ==================================================================================  -->
<!-- ===================================================   Modal ==================================================================================  -->
           
                       <div class="modal fade" id="newReg" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button id="newRegClose2" type="submit" style="float: right; color: #d43f3a; border-color: #d43f3a; background: white; border-radius: 20px;" class="btn btn-sm btn-danger" ><i class="icon-remove"></i></button>
                                      
                                            <h4 class="modal-title" id="H4"> New Item Information</h4>
                                    </div>
                                    
                                    <div class="modal-body">
                                        <div class="panel panel-body" style="padding-top:0px; margin:0px;">
                                            <form class="form-horizontal">

                                                <div id="descripDiv" class="form-group" style="margin-bottom: 5px;">
                                                        <label for="text1" class="control-label col-lg-4">Description: </label>
                                            
                                                    <div class="col-lg-8" >
                                                        <input id="descrip" list="descripList" class="form-control" autofocus>
                                                        <datalist id="descripList" style="margin-bottom: 10px;">
                                                        </datalist>
                                                        <span for="descrip" id="errorde" ></span>
                                                    </div>

                                                </div>
                                                <div id="theDescDiv">
                                               
                                                </div>
                                                <div id="" class="form-group">
                                                        <label for="text1" class="control-label col-lg-4"></label>
                                            
                                                    <div class="col-lg-8" id="">
                                                         <button type="button" id="addSub" class="btn btn-success btn-xs">Add Sub-description</button>
                                                    </div>
                                                   
                                                </div>
                                                <div class="form-group" style="margin-bottom:10px;">
                                                        <label for="text1" class="control-label col-lg-4">Unit: </label>
                                                        
                                                    <div class="col-lg-8">
                                                        <input id="unit" class="form-control" list="compSeacrhList" />
                                                        <datalist id="compSeacrhList">
                                                        <option>Unit</option>
                                                        <option>Piece</option>
                                                        <option>Bundle</option>
                                                        <option>Strip</option>
                                                        <option>Pair</option>
                                                        <option>Gram</option>
                                                        <option>Kilogram</option>
                                                        <option>Ounce</option>
                                                        <option>Meter</option>
                                                        <option>Inch</option>
                                                        <option>Foot</option>
                                                        <option>Brd. Feet</option>
                                                        <option>Cu. Feet</option>
                                                        <option>Cu. Meter</option>
                                                        <option>Litre</option>
                                                        <option>Load</option>
                                                        <option>Bottle</option>
                                                        <option>Case</option>
                                                        <option>Vial</option>
                                                        <option>Sheet</option>
                                                        <option>Ream</option>
                                                        </datalist>
                                                        <span id="errorun"></span>
                                                    </div>
                                                    
                                                </div>

                                                <div class="form-group" style="margin-bottom:10px;">
                                                    <label for="text1" class="control-label col-lg-4">Unit Price: </label>
                                            
                                                    <div class="col-lg-8">
                                                        <input id="price" class="form-control" />
                                                        <span id="errorpr"></span>
                                                    </div>
                                                </div>
                                        
                                                <div class="form-group" style="margin-bottom:10px;">
                                                    <label for="text1" class="control-label col-lg-4">Quantity: </label>
                                            
                                                    <div class="col-lg-8" >
                                                        <input id="quantity" class="form-control" />
                                                        <span id="errorqu"></span>
                                                    </div>
                                                </div> 
                                                 <div class="form-group" style="margin-bottom:10px;">
                                                    <label for="text1" class="control-label col-lg-4">Status: </label>
                                            
                                                    <div class="col-lg-8" >
                                                         <div>
                                                          
                                                        <input id="statusF" data-toggle="dropdown"  class="form-control dropdown-toggle" >
                                                        <ul class="dropdown-menu message-dropdown" style="right:0; width: 342px; margin-left: 18px;">
                                                                <li style="padding-bottom:5px; padding-top:5px; cursor: pointer;">
                                                                    <a  id="equiSel"><i class="icon-ok" style="margin-left:4px;margin-right:6px; color: green;"></i>Complete</a>
                                                                </li>
                                                                <li style="padding-bottom:5px; padding-top:5px;cursor: pointer;">
                                                                    <a id="suppSel"><i class="icon-remove" style="margin-left:4px;margin-right:10px; color: red; "></i> Incomplete</a>
                                                                </li>


                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div> 
                                            </form>
                                        </div>
                                    </div>
                                        
                                    <div class="modal-footer">
                                           
                                            <button id="addList" type="submit" class="btn btn-success" >Add to List</button>
                                            

                                    </div>
                                </div>
                            </div>
                        </div>

<!-- ===================================================   Modal ==================================================================================  -->


<!-- ===================================================   Modal ==================================================================================  -->
           
                       <div class="modal fade" id="errorReg" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog ">
                                <div class="modal-content ">
                                   
                                    
                                    <div class="modal-body ">

                                        <div class="media" role="submit" name="notif1" id="notif1" value="GGWP">
                                    
                                            <span class="pull-left" >
                                                <div class="btn btn-danger btn-lg btn-circle" role="button" aria-disabled="true" disabled = "disabled">
                                                    <i class="icon-exclamation"></i></div>
                                    </span>  
                                    <div class="media-body">
                                        <h5 class="media-heading" style="margin-top:10px;">
                                            <strong>Form was not filled completely.</strong>
                                        </h5>
                                        <hr>
                                        
                                        <p style="margin-bottom:10px;">Please provide all the informations ask before proceeding to the next step.</p>   
                                    </div>
                                    

                                </div>
                                        
                                    </div>
                                        
                                    <div class="modal-footer">
                                            <button id="addList2" data-dismiss="modal" type="submit" class="btn btn-info">OK</button>
                                    </div>
                                </div>
                            </div>
                        </div>

<!-- ===================================================   Modal ==================================================================================  -->

<!-- ===================================================   Modal ==================================================================================  -->
           
                       <div class="modal fade" id="compltCheckReg" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog ">
                                <div class="modal-content ">
                                   
                                    
                                    <div class="modal-body ">

                                        <div class="media" role="submit" name="notif1" id="notif1" value="GGWP">
                                    
                                            <span class="pull-left" >
                                                <div class="btn btn-danger btn-lg btn-circle" role="button" aria-disabled="true" disabled = "disabled">
                                                    <i class="icon-question"></i></div>
                                    </span>  
                                    <div class="media-body">
                                        <h5 class="media-heading" style="margin-top:10px;">
                                            <strong>Are all the items were delivered?</strong>
                                        </h5>
                                        <hr>
                                        
                                        <p style="margin-bottom:10px;">Did the supplier delivered all the items indicated on the Purchase Order during this delivery transaction?</p>   
                                    </div>
                                    

                                </div>
                                        
                                    </div>
                                        
                                    <div class="modal-footer">
                                            <button id="allItemsSentYesBTN"  type="button" role="button" class="btn btn-success">Yes</button>
                                            <button id="allItemsSentNoBTN"  type="button" role="button" class="btn btn-danger">No</button>
                                    </div>
                                </div>
                            </div>
                        </div>

<!-- ===================================================   Modal ==================================================================================  -->




            <!-- /. PAGE INNER  -->
        </div>
        <!-- /. PAGE WRAPPER  -->
    </div>
    <div id="footer-sec">
       &copy; Mindanao State University - General Santos City</i>  
    </div>

    <!-- /. FOOTER  -->
    <!-- SCRIPTS -AT THE BOTOM TO REDUCE THE LOAD TIME-->
    <!-- JQUERY SCRIPTS -->
    <script src="{% static 'assets/js/jquery-1.10.2.js' %}"></script>
    <!-- BOOTSTRAP SCRIPTS -->
    <script src="{% static 'assets/js/bootstrap.js' %}"></script>
    <!-- METISMENU SCRIPTS -->
    <script src="{% static 'assets/js/jquery.metisMenu.js' %}"></script>
    <!-- CUSTOM SCRIPTS -->
    <script src="{% static 'assets/js/custom.js' %}"></script>
    
    <!-- WIZARD SCRIPTS <script src="{% static 'assets/js/default-inven.js' %}"></script> -->
    
    <script src="{% static 'assets/js/date-num-convert.js' %}"></script>

    <script src="{% static 'assets/plugins/datepicker/js/bootstrap-datepicker.js' %}"></script> 
       <script type="text/javascript">
        
       $(document).ready(function () {
           $('#new_items').attr('class', '{{cssActiveMenu}} theAs')
           $('#theDelUL').attr('class','nav nav-second-level collapse in theULs')
           $('#delTop').attr('class', 'active-menu-top theTopAs')
       })   



$('#idTourDateDetails').datepicker({

     dateFormat: 'dd-mm-yy',

     minDate: '+5d',

     changeMonth: true,

     changeYear: true,

     altField: "#idTourDateDetailsHidden",

     altFormat: "yy-mm-dd"

 });


        
    </script>
    <script type="text/javascript">


    $('#clock').click(function(argument) {
        
        $('.clockpicker').datepicker({
            placement: 'top',
            align: 'left',
            donetext: 'Done'
        });
    })

    $('#addItemBTN').click(function (e) {
        $('#newReg').modal('toggle')
    });

</script>
    <script type="text/javascript">
        
       var total = 0
       var theArray = {}
       var theArrayIndex = 1       
       var prevTotal = 0;
       var compArray = {};

       var totalNumRec = 0;
       var totalCostOfItems = 0;

       var theIARNum = '{{pageData1.0.0}}';


       var insOffID = ''
       var receiveoffID = ''

       var compltstatus = null;
       var asses = null;

       var noExp = false
    

    $('#insofficer').keyup(function(e){
        e.preventDefault();
           
            $.ajax({
                type: 'POST',
                url:'/procurement_office/getEmployeeData/',
                data:{
                    
                    'inputName': document.getElementById("insofficer").value,
                     csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                   
                },

                    success: function(response) {

                        document.getElementById("insOffList").innerHTML = ""
                        
                        for(var key in response) {
                           
                            var value = response[key];
                            document.getElementById("insOffList").innerHTML += '<option id="'+key+'" value ="'+value['name']+'"/>'

                        }

                    }

            });
    });


      $('#myTable').on('click','button', function (e) {

            
            var id = this.id;
            var value = document.getElementById(id).value

            var tdClicked = $(this).closest('td').attr('id');
            
            if (tdClicked === 'compTD') {


                if (id === value+'_comp') {


                    $('#'+value+'_comp').attr('class', 'btn btn-sm btn-success btn-circle')
                    $('#'+value+'_notcomp').attr('class', 'btn btn-sm btn-circle')

                    compArray[value] = 'TRUE'
                
                } else {
                    

                    $('#'+value+'_theDropDown').show();

                }

                console.log(compArray)

            }



            if (tdClicked === 'actionTD') {

                if (id === value+'_removeRow') {
                    
                    $(this).closest ('tr').remove ();

                    delete theArray[value];

                } else {

                    
                    var theArrayData = theArray[value]
                    prevTotal = theArrayData['3']*theArrayData['4'];

                    document.getElementById("descrip2").value = theArrayData['1'];
                    document.getElementById("unit2").value = theArrayData['2'];
                    document.getElementById("price2").value = theArrayData['3'];
                    document.getElementById("quantity2").value = theArrayData['4'];
                    
                    $('#addList2').val(value);
                
                }

            }

            

        });   
        
    
        function showInputDialog(input) {
                

            $('#joptionTitle').html(input);
            $('#jOption').modal('toggle');

        }
      



    $("#insofficer").on('input', function () {
       
        var val = this.value;
        var id = $('#insOffList option[value="' + val +'"]').attr('id');
        
        insOffID = id

      }); 

    $('#receiveoff').keyup(function(e){
        e.preventDefault();
           
            $.ajax({
                type: 'POST',
                url:'/procurement_office/getEmployeeData/',
                data:{
                    
                    'inputName': document.getElementById("receiveoff").value,
                     csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                   
                },

                    success: function(response) {

                        document.getElementById("recOffList").innerHTML = ""
                        
                        for(var key in response) {
                           
                            var value = response[key];
                            document.getElementById("recOffList").innerHTML += '<option id="'+key+'" value ="'+value['name']+'"/>'

                        }

                    }

            });
    });


    $("#receiveoff").on('input', function () {
       
        var val = this.value;
        var id = $('#recOffList option[value="' + val +'"]').attr('id');
        
        receiveoffID = id

      }); 

       
    // =====================================================================================================  
       
       $('#addList2').click(function() {

        var btnValue = $('#addList2').val()

        var descrip = document.getElementById("descrip2").value;
        var unit = document.getElementById("unit2").value;
        var price = document.getElementById("price2").value;
        var quantity = document.getElementById("quantity2").value;
        var itemTotal = document.getElementById("price2").value * document.getElementById("quantity2").value;
        var itemTotalToString = "" + itemTotal;
        
        var tr = '<tr id = "'+btnValue+'_tr">';
                     tr += '<td>'+descrip+'</td>';
                     tr += '<td class="text-center">'+comaSegregator(quantity)+'</td>';
                     tr += '<td class="text-center" id="compTD">';
                     tr += '<button id = "'+btnValue+'_comp" value="'+btnValue+'" class="btn btn-sm btn-success btn-circle" role= "button" aria-disabled="true" style="font-weight:200">Yes</button>';
                     tr += ' <button id = "'+btnValue+'_notcomp" value="'+btnValue+'" class="btn btn-sm btn-danger btn-circle" role= "submit" aria-disabled="true" style="font-weight:200">No</button>';
                     tr +='</td>';
                     tr += '<td class="text-center" id="workTD">';
                     tr += '<button id = "'+btnValue+'_work" value="'+btnValue+'" class="btn btn-sm btn-success btn-circle" role= "button" aria-disabled="true" style="font-weight:200">Yes</button>';
                     tr += ' <button id = "'+btnValue+'_notwork" value="'+btnValue+'" class="btn btn-sm btn-danger btn-circle" role= "submit" aria-disabled="true" style="font-weight:200">No</button>';
                     tr +='</td>';
                     tr += '<td class="text-center" id="actionTD">';
                     tr += '<button id = "'+btnValue+'_editRow" value="'+btnValue+'" data-toggle="modal"  data-target="#editReg" class="btn btn-sm btn-success btn-circle" role= "button" aria-disabled="true"><i class="icon-edit"></i></button>';
                     tr += ' <button id = "'+btnValue+'_removeRow" value="'+btnValue+'" class="btn btn-sm btn-danger btn-circle" role= "submit" aria-disabled="true"><i class="icon-remove"></i></button>';
                     tr +='</td>';
        
        total = total - prevTotal;
        total = total + itemTotal;
        var totalToString = ""+total;
        
        document.getElementById(btnValue+"_tr").innerHTML = tr;  
        
        theArray[btnValue] = {'1':descrip, '2':unit, '3':price, '4':quantity};
                      
        $('#editReg').modal('toggle');    
           
       });


$('#table').on('focusin', 'input', function(argument) {
    var id  = this.id
    var arr = id.split('_')


    $(this).keypress(function(e) {
    if(e.which == 13) {
        var inputData = this.value
        $('#'+arr[0]+'_notcomp').attr('class', 'btn btn-sm btn-danger btn-circle')
        $('#'+arr[0]+'_comp').attr('class', 'btn btn-sm btn-circle')

        compArray[arr[0]] = {'status':'FALSE', 'quantity': parseInt(inputData)}
        $('#'+arr[0]+'_theDropDown').hide();
        //$(".dropdown-content").hide();

    }
});
})


$('#suppF').keyup(function(e){
        e.preventDefault();
           
            $.ajax({
                type: 'POST',
                url:'/procurement_office/findComp/',
                data:{
                    
                    'compName': document.getElementById("suppF").value,
                     csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                   
                },

                    success: function(response) {

                        document.getElementById("compSeacrhList").innerHTML = ""
                        
                        for(var key in response) {
                            var value = response[key];
                            document.getElementById("compSeacrhList").innerHTML += '<option value ="'+value+'"/>'
                        }
                    }

            });
    });

$('#ponum_field').keyup(function(e){
        e.preventDefault();
        var inputPO = $('#ponum_field').val()
        if(inputPO.length == 6){
            $.ajax({
                type: 'POST',
                url:'/inventory_office/getPOFromTimeLineDetails/',
                data:{
                    
                    'poNum': inputPO,
                     csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                   
                },

                    success: function(response) {


                        $('#podateF').val(response['podate'])
                        $('#expdeldateF').val(response['expdate'])
                        $('#suppF').val(response['supp'])
                    }

            });
        }
           /*
            */
    });

// =====================================================================================================  
       

      $('#sentNotif2').click(function () {
       
       $('#transComp').modal('toggle')
   
   })


    $('#sentNotif').click(function () {
       
       $('#transComp').modal('toggle')
       window.location.href = "/inventory_office/receive/po/"+poNum.replace('-','_')+"/details/"
   
   })

// =====================================================================================================   
     $("#descrip").on('input', function () {
       
        var val = this.value;
        var idComplt = $('#descripList option[value="' + val +'"]').attr('id');
        var idArr = idComplt.split('_')

        var id = idArr[0]

    
        
          
            $.ajax({
                type: 'POST',
                url:'/requisitioner/getItemDetails/',
                data:{
                    
                    'inputItemId': id,
                    csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),

                },

                    success:function(response) {
                      
                        fResponse = response;
                        if (reqClass == '') {

                        tempReqClass = fResponse['class']
                            
                            if (response['class'] == 'Supply') {

                                    $.ajax({
                                            type: 'POST',
                                            url:'/requisitioner/getSupplyAvailability/',
                                            data:{
                                                
                                                'suppItemID': id,
                                                csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),

                                            },

                                                success:function(response2) {
                                                        
                                                        if (response2['quantity'] == 0 || response2['quantity'] == '0') {

                                                            $('#errorde').html('')


                                                            $('#unit').removeAttr('disabled')
                                                            $('#price').removeAttr('disabled') 
                                                            $('#quantity').removeAttr('disabled') 
                                                            $('#addList').attr('class', 'btn btn-success')
                                                            $('#addList').html('Add to List')

                                                            forRISCheck = false
                                                            
                                                            $('#unit').val(fResponse['unit'])
                                                            $('#price').val(fResponse['unitprice']) 
                                                        
                                                        }
                                                        else{

                                                            $('#unit').val('')
                                                            $('#price').val('') 
                                                            $('#quantity').val( '')

                                                            $('#errorde').html('SMO has this item on stock and are available for RIS')
                                                            $('#unit').attr('disabled', '')
                                                            $('#price').attr('disabled', '') 
                                                            $('#quantity').attr('disabled', '') 
                                                            $('#addList').attr('class', 'btn btn-primary')
                                                            $('#addList').html('OK');
                                                            
                                                            forRISCheck = true;
                                                            
                                                        }
                                                }

                                        });



                                } else {
                                   

                                    $('#errorde').html('')


                                    $('#unit').removeAttr('disabled')
                                    $('#price').removeAttr('disabled') 
                                    $('#quantity').removeAttr('disabled') 
                                    $('#addList').attr('class', 'btn btn-success')
                                    $('#addList').html('Add to List')

                                    forRISCheck = false

                                    var itemDes = idArr[1]
                                    var itemDesArr = itemDes.split('$')

                                    $('#descrip').val(itemDesArr[0])
                                    $('#theDescDiv').html(theDescDivHTML)
                                    for (var i =  1; i < itemDesArr.length; i++) {
                                        
                                        console.log(itemDesArr[i])
                                        displayAddSub(itemDesArr[i])
                                    
                                    }


                                    $('#unit').val(fResponse['unit'])
                                    $('#price').val(fResponse['unitprice']) 
                                
                                }

                        }
                        else{
                          
                            
                            if (reqClass != fResponse['class']) {
                                $('#errorde').html('invalid input, the latest input was not a ' + reqClass)
                                $("#descrip").val('')
                            }
                            else{

                                if (fResponse['class'] == 'Supply') {
                                    //$('#errorde').html('input was a '+fResponse['class'])
                                    
                                    var itemDes = idArr[1]
                                    var itemDesArr = itemDes.split('$')

                                    $('#descrip').val(itemDesArr[0])
                                    $('#theDescDiv').html(theDescDivHTML)
                                    for (var i =  1; i < itemDesArr.length; i++) {
                                        displayAddSub(itemDesArr[i])
                                    }

                                    $('#unit').val(fResponse['unit'])
                                    $('#price').val(fResponse['unitprice']) 
                                

                                } else {

                                  
                                    var itemDes = idArr[1]
                                    var itemDesArr = itemDes.split('$')

                                    $('#descrip').val(itemDesArr[0])
                                    $('#theDescDiv').html(theDescDivHTML)
                                    for (var i =  1; i < itemDesArr.length; i++) {
                                        displayAddSub(itemDesArr[i])
                                    }

                                    $('#unit').val(fResponse['unit'])
                                    $('#price').val(fResponse['unitprice']) 
                                
                                }
                                  

                            }
                        }
                     
                    }

            });
      }); 


        $('#descrip').keyup(function(e) {

            e.preventDefault();

            
            $.ajax({
                type: 'POST',
                url:'/requisitioner/findItems/',
                data:{
                    
                    'descripData': $('#descrip').val(),
                    csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),

                },

                    success:function(response) {
                        
                        document.getElementById("descripList").innerHTML = "";

                    
                            
                            $('#classifDiv').attr('style', 'display:none')
                            for(var key in response) {
                               
                                var value = response[key];
                                document.getElementById("descripList").innerHTML += '<option id="'+key+'_'+value['name']+'" value ="'+correckString(value['name'])+'"/>'

                        }    
                        
                     
                    }

            });
       })

        function correckString(input) {
            console.log('===========================================================')
            console.log(input)
            console.log(input.replace('$' , ", "))
            var output =  input.replace(/[$]/g, ', ')

            return output
        }
        
        $('#addSub').click(function (){
           
            displayAddSub('')
        
        })

               function displayAddSub(input) {
            
            var descrip2Val = {}

            for (var i = 0 ; i < numOfDesc - 1; i++) {
                var ii = i + 1;
                var theVal = $('#descrip2_'+ii.toString()).val()
                descrip2Val[i] = theVal
            }

            for (var x in descrip2Val) {
               
                var theArrayVal = descrip2Val[x]
                var indx = parseInt(x) + 1
                $('#descrip2_'+indx.toString()).attr('value', theArrayVal)
                
            }

            var theHTML = $('#theDescDiv').html()
         

            console.log(theHTML)

            var theHTMLToAdd = '<div id="descripDiv_'+numOfDesc.toString()+'" class="form-group" style="margin-bottom: 5px;">'
                theHTMLToAdd += '<label for="text1" class="control-label col-lg-4"></label>'
                theHTMLToAdd += '<div class="col-lg-8" >'
                theHTMLToAdd += '<div class="form-group input-group"  style="padding:0px; margin:0px;">'
                theHTMLToAdd += '<input style="margin-top:8px;" value="'+input+'" id="descrip2_'+numOfDesc.toString()+'" value="" class="form-control" >'
                theHTMLToAdd += ' <span   class="input-group-btn">'
                theHTMLToAdd += '    <button style="margin-top:8px; color:#a94442; background-color:white; border:1px solid #ccc; border-raduis:10px;" class="btn" type="button" role="button" name="search_button"  id="removeAddSubBTN_'+numOfDesc.toString()+'">'
                theHTMLToAdd += '        <i class="icon-remove"></i>'
                theHTMLToAdd += '    </button>'
                theHTMLToAdd += '   </span>'
                theHTMLToAdd += '     </div>'
                //theHTMLToAdd += '<datalist id="descripList" style="margin-bottom: 10px;">'
                //theHTMLToAdd += '</datalist>'
                theHTMLToAdd += '<span for="descrip" id="errorde" ></span>'
                theHTMLToAdd += '</div>'
                theHTMLToAdd += '</div>'

            numOfDesc = numOfDesc + 1;
            
            document.getElementById('theDescDiv').innerHTML = theHTML + theHTMLToAdd;
        }


    function saveReceiveTrans(e) {

            console.log(theArray)
            console.log(compArray)
            $.ajax({
                type: 'POST',
                url:'/inventory_office/receiveItems/',
                data: {
                    

                    'theArray': JSON.stringify(theArray),
                    'invNum': invNum,
                    'recDate': recDate,
                    'supplier': supplier,
                    'insOff': insOffID,
                    'insdate': insdate,
                    'receiveoff': receiveoffID,
                    'receivedate': receivedate,
                    'poNum': poNum,
                    'expdate':expDateDel,
                    'asses': asses,
                    'iarnum': theIARNum,
                    'compltstatus': compltstatus,
                    csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                   
                },

                    success: function(response) {
                        
                        window.location.href = "/inventory_office/generateIARDocument/";
                        $('#transComp2').modal('toggle')
                    }

            });
    }
    $('#theDescDiv').on('click', 'button', function (e) {
        var id = this.id
        var idArr = id.split('_')

        $('#descripDiv_'+idArr[1]).remove()
    }) 
    $('#newRegClose').click(function(e) {
         document.getElementById("descrip").value = "";
            document.getElementById("unit").value = "";
            document.getElementById("price").value = "";
            document.getElementById("quantity").value = "";
            document.getElementById("statusF").value = "";

            $('#theDescDiv').html(theDescDivHTML)
            numOfDesc = 1

            $('#classifDiv').attr('style', 'display:none');
            $('#class').val('');

            $('#unit').removeAttr('disabled')
            $('#price').removeAttr('disabled') 
            $('#quantity').removeAttr('disabled') 
            $('#addList').attr('class', 'btn btn-success')
            $('#addList').html('Add to List')

            $('#newReg').modal('toggle');
    })

     $('#newRegClose2').click(function(e) {
         document.getElementById("descrip").value = "";
            document.getElementById("unit").value = "";
            document.getElementById("price").value = "";
            document.getElementById("quantity").value = "";
            document.getElementById("statusF").value = "";

            $('#theDescDiv').html(theDescDivHTML)
            numOfDesc = 1

            $('#classifDiv').attr('style', 'display:none');
            $('#class').val('');

            $('#unit').removeAttr('disabled')
            $('#price').removeAttr('disabled') 
            $('#quantity').removeAttr('disabled') 
            $('#addList').attr('class', 'btn btn-success')
            $('#addList').html('Add to List')

            $('#newReg').modal('toggle');
    })
// =====================================================================================================      

    $('#price').keypress(function(event){

       if(event.which != 8 && isNaN(String.fromCharCode(event.which))){
            document.getElementById("errorpr").innerHTML = "Non-number input is not allowed" 
           event.preventDefault(); //stop character from entering input
       }
       else{
        document.getElementById("errorpr").innerHTML = ""
        $('#price').removeAttr("style") 
       }

   });

// =====================================================================================================      

   $('#quantity').keypress(function(event){

       if(event.which != 8 && isNaN(String.fromCharCode(event.which))){
            document.getElementById("errorqu").innerHTML = "Non-number input is not allowed" 
           event.preventDefault(); //stop character from entering input
       }
       else{
        document.getElementById("errorqu").innerHTML = "" 
       }

   });


// =====================================================================================================      

    </script>

    <script type="text/javascript">

    var uiDisplay1 = '';
    var uiDisplay2 = '';
    var uiDisplay3 = '';


    var poNum = ''

    var invNum = ''
    var recDate = ''
    var insOff = ''
    var insdate = ''
    var receiveoff = ''
    var receivedate = ''
    var supplier = ''
    var expDateDel= ''
      
    $(document).ready(function () {
        
        uiDisplay1 = $('#displayDiv').html();
        uiDisplay2 = $('#detailsFrame').html();

        //$('#detailsFrame').html('');

    });

 
    var stepCount = 0
    
    $('#nxt_btn').click(function () {
     
        if (stepCount === 0) {
            
            
            
            invNum = $('#receiptnum').val();
            recDate = $('#recdate').val();
            insOff = $('#insofficer').val();
            insdate = $('#insdate').val();
            receiveoff = $('#receiveoff').val();
            receivedate = $('#deldate').val();
            supplier = $('#suppF').val();
            expDateDel = $('#expdeldateF').val(); 
            poNumber = $('#ponum_field').val();

            var arrDate = expDateDel.split('-')
            var curDate = new Date();
            var expdateDate1 = new Date(expDateDel)

            if (invNum == '' || insOff == '' || receiveoff == '' || poNumber == ''|| supplier == ''|| theArray['1'] == null) {

                $('#errorReg').modal('toggle')
            
            } else {

                    assesData = false;

                    if (curDate <= expdateDate1) {
                        assesData = true;
                    }

                    asses = assesData

                    poNum = $('#ponum_field').val();
                   
                    
                    //displayPageInfo();
                    displayPageData();

                    uiDisplay3 = $('#detailsFrame').html();

                    console.log(theArray)

                    document.body.scrollTop = 0; // For Chrome, Safari and Opera 
                    document.documentElement.scrollTop = 0; 

                    $('#prev_btn').removeAttr('style');
                    $('#displayDiv').html(uiDisplay3); 

                    $('#nxt_btn').attr('class', 'btn btn-success')
                    $('#nxt_btn').html('<i class="icon-plus"></i> Save Receive Transaction')


                    stepCount = stepCount + 1; 

                    return false;
        
            }


        }
     
        if (stepCount === 1) {
            
            if (compltstatus == true) {
                $('#compltCheckReg').modal('toggle')
            } else {
               saveReceiveTrans(); 
            }
            
        }
    
    });

    $('#allItemsSentYesBTN').click(function (e) {
         compltstatus = true
         $('#compltCheckReg').modal('toggle')
         saveReceiveTrans();
    })
    
    $('#allItemsSentNoBTN').click(function (e) {
         compltstatus = false
         $('#compltCheckReg').modal('toggle')
         saveReceiveTrans();
    })



    $('#prev_btn').click(function () {
         
        if (stepCount == 1) {

            $('#displayDiv').html(uiDisplay1);
            $('#receiptnum').val(invNum)
            $('#recdate').val(recDate)
            $('#insofficer').val(insOff)
            $('#insdate').val(insdate)
            $('#receiveoff').val(receiveoff)
            $('#deldate').val(receivedate)


            stepCount = stepCount - 1;
        
        }

    })


    </script>

    <script type="text/javascript">
        

    $('#deldate').focusin(function () {
        $('#deldate').datepicker({
                    format: "yyyy-mm-dd"
                }); 
    });

// =====================================================================================================      

    $('#insdate').focusin(function () {
        $('#insdate').datepicker({
                    format: "yyyy-mm-dd"
                }); 
    });

       $('#expdeldateF').focusin(function () {
        $('#expdeldateF').datepicker({
                    format: "yyyy-mm-dd"
                }); 
    });
       $('#podateF').focusin(function () {
        $('#podateF').datepicker({
                    format: "yyyy-mm-dd"
                }); 
    });



     $('#recdate').focusin(function () {
        $('#recdate').datepicker({
                    format: "yyyy-mm-dd"
                }); 
    });

     


    $('#idTourDateDetails').focusin(function () {
        $('#idTourDateDetails').datepicker({
                    format: "yyyy-mm-dd"
                }); 
    });

    $('#idTourDateDetailsHidden').focusin(function () {
        $('#idTourDateDetailsHidden').datepicker({
                    format: "yyyy-mm-dd"
                }); 
    });

// =====================================================================================================      

        $(document).ready(function () {
                

                var someDate = new Date();

                var dateToDisplay = someDate.getFullYear()+ '-' + 
                                    setSingleDigitToDouble(someDate.getMonth()+1)+ '-' + 
                                   setSingleDigitToDouble(someDate.getDate());
                 
                 
                $('#deldate').val(dateToDisplay);
                $('#insdate').val(dateToDisplay);
                $('#expdeldateF').val(dateToDisplay);
                $('#podateF').val(dateToDisplay);
                $('#recdate').val(dateToDisplay);
            
            });
                
// =====================================================================================================                  
        
        function setSingleDigitToDouble(input) {
            
            
            var outputData = "" + input;
            
            
            if (outputData.length === 1) {
                outputData = "0"+input;
            }

            return outputData;

         }
// =====================================================================================================  

    </script>
    <script type="text/javascript">
        
    //========= display of the page data ============================================================== 

    function displayPageData() {
            
            $('#poRefDisplay').html(poNum) 
            $('#insOffDis').html(insOff) 
            $('#recOffDis').html(receiveoff) 
            $('#invNoDisplay').html(invNum)
            $('#dateReceivedDisplay').html(datenumconvert(receivedate))
            $('#dateInspectedDisplay').html(datenumconvert(insdate))
            if (noExp) {
                $('#dateInspectedDisplay2').html('n/a')
            }else{
                $('#dateInspectedDisplay2').html(datenumconvert(expDateDel))
            }

            
            $('#suppNameDisplay').html(supplier)
            $('#missingQuan').html(comaSegregator(totalCostOfItems))
            $('#receiveQuan').html(totalNumRec)

            arrDateExp = expDateDel.split('-')

            var expDateData = new Date(arrDateExp[0], arrDateExp[1], arrDateExp[2]);
            var dateNow = new Date();
            if (noExp) {
                 $('#asse').html('Not a MSU-GSC requested items')
                 $('#asse').attr('class','label label-success')
            }else{
                if (expDateData < dateNow) {
                    $('#asse').html('On Time')
                    $('#asse').attr('class','label label-success')
                } else {
                     $('#asse').html('Late')
                     $('#asse').attr('class','label label-danger')

                }
            }

            


            var t = ''

            for( var i in theArray){
                  
                  var data = theArray[i]
                  console.log('i: '+i + ' ==== '+(parseInt(i)+1).toString() )
                  console.log(data)

                  var tr = '<tr id="'+(i+1).toString()+'_tr">';
                        tr += '<td class="text-center">'+(parseInt(i)).toString()+'</td>';

                        var descripComplt = data['1']
                        var descripArr = descripComplt.split('$')

                        if (descripArr.length == 1) {
                            tr += '<td>'+data['1']+'</td>';
                             tr += '<td class="text-center">'+data['4']+'</td>';
                            tr += '<td class="text-center">'+data['2']+'</td>';
                            tr += '<td class="text-center">'+' '+ comaSegregator(data['3'])+'</td>';
                            tr += '<td class="text-center">'+' '+ comaSegregator(parseInt(data['3'])*parseInt(data['4']))+'</td>';
                                    
                           if (comCheck) {
                                tr += '<td class="text-center" style="color:#5cb85c">Complete</td>'
                            }else{
                                tr += '<td class="text-center" style="color:#d9534f">Incomplete</td>'
                            }
                            tr += "</tr>";
                        } else {

                            tr += '<td>'+descripArr[0]+'</td>';
                            tr += '<td class="text-center">'+data['4']+'</td>';
                            tr += '<td class="text-center">'+data['2']+'</td>';
                            tr += '<td class="text-center">'+' '+ comaSegregator(data['3'])+'</td>';
                            tr += '<td class="text-center">'+' '+ comaSegregator(parseInt(data['3'])*parseInt(data['4']))+'</td>';
                                    
                           if (comCheck) {
                                tr += '<td class="text-center" style="color:#5cb85c">Complete</td>'
                            }else{
                                tr += '<td class="text-center" style="color:#d9534f">Incomplete</td>'
                            }
                            tr += "</tr>";

                          for (var i = 1; i < descripArr.length; i++) {
                            tr += '<tr>'
                            tr += '<td></td>';
                             tr += '<td>'+descripArr[i]+'</td>';
                            tr += '<td class="text-center"></td>';
                            tr += '<td class="text-center"></td>';
                            tr += '<td class="text-center"></td>';
                            tr += '<td class="text-center"></td>';
                                    
                           tr += '<td class="text-center"></td>'
                           
                            tr += "</tr>"; 
                          }

                        }
                        
                       
                        t += tr;
                        
                      
            }
            
            document.getElementById("receivedItemsList").innerHTML += t;

         }

 
     function correctURL(input) {
            var arr = input.split('-')
            var output = ''
            for (var i = 0; i < arr.length; i++) {
                if (i == arr.length - 1) {
                    output = output + arr[i];
                }
                else{
                    output = output + arr[i]+'_';
                }
            }

            return output;

        }  

     function comaSegregator(input){

        var inputData = input + ''

        var output = ""
        var indexCheck = 1
        for (var i = inputData.length - 1; i >= 0; i--) {
            
            if (indexCheck%3 == 0) {

                if (i == 0) {
                     output = inputData[i] + output;
                    indexCheck = indexCheck + 1;

                } else {
                     output = ", " + inputData[i] + output;
                    indexCheck = indexCheck + 1;
                }
                   
            } else {
                output = inputData[i] + output;
                indexCheck = indexCheck + 1;
            }
        }

        return(output)
    }

    $('#suppSel').click(function (argument) {
        
       
        $('#statusF').val('Incomplete')
        //$('#missDiv').attr('style', 'margin-bottom:10px;')
        //$('#addDetDiv1').attr('style','display: none')

        comCheck = false;
        compltstatus = false;
       
    })   

    $('#equiSel').click(function (argument) {
                   
       
            $('#statusF').val('Complete')
            //$('#missDiv').attr('style','display: none')
           
            comCheck = true;

            if (compltstatus == null) {
                compltstatus = true;
            }
                   
        })   

     $('#chck').click(function() {
        if ($('#chck').is(":checked")) {
                  $('#expDateDiv').attr('style','display:none;')  
                  noExp = true
            } else {
                $('#expDateDiv').removeAttr('style')
                noExp = false
            }

     });




// =====================================================================================================      

    function setErrorMsgToEmpty() {
        
        document.getElementById("errorde").innerHTML = "";
        document.getElementById("errorpr").innerHTML = "";
        document.getElementById("errorun").innerHTML = "";
        document.getElementById("errorqu").innerHTML = "";
    }



    </script>
    <script type="text/javascript">
    
       var reqClass = '';
       var tempReqClass = '';

        var numOfDesc = 1

        var theDescDivHTML = $('#theDescDiv').html()

        var comCheck = true;


       document.getElementById("addList").onclick = function() {
        


            if (numOfDesc == 1) {
                var descrip = document.getElementById("descrip").value;

            } 
            else {

             
                var descrip = document.getElementById("descrip").value;
                var descripCopy = document.getElementById("descrip").value+';';
                
                for (var i = 1; i < numOfDesc; i++) {
                    
                    descrip += '$'
                    descrip += $('#descrip2_'+i.toString()).val();
                    //descrip += '$'

                    descripCopy += $('#descrip2_'+i.toString()).val();
                    descripCopy += ';'

                    
                }
            }
            
            var unit = document.getElementById("unit").value;
                if (unit == '') {
                    unit = " "
                }
            var price = document.getElementById("price").value;
            var quantity = document.getElementById("quantity").value;
            var itemTotal = document.getElementById("price").value * document.getElementById("quantity").value;
            var statusData = ''

            if (comCheck) {
                statusData = 'All';

            }
            else{
                statusData = 'Only '+ quantity
                
            }    



            var itemTotalToString = "" + itemTotal;
            var itemClass = ''

            if ($('#classifDiv').attr('style') != 'display:none') {
                itemClass = $('#class').val();
            }

            setErrorMsgToEmpty()

            if (descrip == ""||unit == ""||price == ""||quantity == "") {

                
                       if (descrip == "") {
                            
                            $('#descrip').attr('autofocus', '')
                            $('#quantity').removeAttr('autofocus', '')
                            $('#price').removeAttr('autofocus', '')
                            $('#unit').removeAttr('autofocus', '')

                            document.getElementById("errorde").innerHTML = "Don't leave this blank"
                            return false;

                        }
                    
                        if (price == "") {
                            
                            $('#descrip').removeAttr('autofocus', '')
                            $('#quantity').removeAttr('autofocus', '')
                            $('#price').attr('autofocus', '')
                            $('#unit').removeAttr('autofocus', '')
                            document.getElementById("errorpr").innerHTML = "Don't leave this blank" 
                            return false;

                        }
                        if (quantity == "") {
                            
                            $('#descrip').removeAttr('autofocus', '')
                            $('#quantity').attr('autofocus','');
                            $('#price').removeAttr('autofocus', '')
                            $('#unit').removeAttr('autofocus', '')
                            
                            document.getElementById("errorqu").innerHTML = "Don't leave this blank" 
                            return false;

                        }
                    
            

            } else {
            
            var t = ''
             tr = '<tr '+theArrayIndex+'_tr id = "'+theArrayIndex+'_tr">';
                    
                   tr += '<td class="text-center">'+(theArrayIndex)+'</td>';
                    
                    var descripString = []

                    if (numOfDesc == 1) {
                        tr += '<td>'+descrip+'</td>';
                    } else {

                        
                        descripString = descripCopy.split(';')
                        tr += '<td>'+descripString[0]+'</td>';
                    }

                     tr += '<td class="text-center">'+comaSegregator(quantity)+'</td>';
                     tr += '<td class="text-center">'+unit+'</td>';
                     tr += '<td class="text-center"> '+comaSegregator(price)+'</td>';
                     tr += '<td class="text-center"> '+comaSegregator(itemTotalToString)+'</td>';
                     if (comCheck) {
                         tr += '<td class="text-center" style="background:#94d094 ;">'+statusData+'</td>'
                     }
                     else{
                         tr += '<td class="text-center" style="background:#f5a4a1;">'+statusData+'</td>'
                     }   
                    
                     tr += '<td class="text-center">';
                     tr += '<button id = "'+theArrayIndex+'_editRow" value="'+theArrayIndex+'" data-toggle="modal"  data-target="#editReg" class="btn btn-xs btn-success" role= "button" aria-disabled="true"><i class="icon-edit"></i></button>';
                     tr += ' <button id = "'+theArrayIndex+'_removeRow" value="'+theArrayIndex+'" class="btn btn-xs btn-danger" role= "submit" aria-disabled="true"><i class="icon-remove"></i></button>';
                     tr +='</td>';
                     tr += "</tr>";
                     if (numOfDesc != 1) {
                        
                        for (var i = 1; i < descripString.length-1; i++) {
                             tr += '<tr class="'+theArrayIndex+'_tr" id = "'+theArrayIndex+'_tr">';
                             tr += '<td></td>';
                             tr += '<td>'+descripString[i]+'</td>';
                             tr += '<td></td>';
                             tr += '<td></td>';
                             tr += '<td></td>';
                             tr += '<td></td>';
                             tr += '<td></td>';
                             tr += '<td></td>';
                             tr += "</tr>";
                        }
                     } 

                     t += tr;
            
            total = total + itemTotal;
            
            var totalToString = ""+total;
            
            document.getElementById("table").innerHTML += t;
            //document.getElementById("total").innerHTML = " "+comaSegregator(totalToString)

            theArray[theArrayIndex] = {'1':descrip, '2':unit, '3':price, '4':quantity, '5':comCheck };
            
            theArrayIndex = theArrayIndex + 1;
            
            totalNumRec = totalNumRec + parseInt(quantity)
            totalCostOfItems = totalCostOfItems + (parseInt(quantity)* parseInt(price))



            console.log(theArray)

            document.getElementById("descrip").value = "";
            document.getElementById("unit").value = "";
            document.getElementById("price").value = "";
            document.getElementById("quantity").value = "";
            document.getElementById("statusF").value = "";
            

            $('#theDescDiv').html(theDescDivHTML)
            numOfDesc = 1

            $('#classifDiv').attr('style', 'display:none');
            $('#class').val('');

            $('#unit').removeAttr('disabled')
            $('#price').removeAttr('disabled') 
            $('#quantity').removeAttr('disabled') 
            $('#addList').attr('class', 'btn btn-success')
            $('#addList').html('Add to List')

            $('#newReg').modal('toggle');

            if (reqClass == '') {
             reqClass = tempReqClass;
        
            }

        }
                         
            
    };

    $('#myTable').on('click','button', function (e) {
        
        var id = this.id;
        var arr = id.split('_')
        
        var value = document.getElementById(id).value
        var theArrayData = theArray[value]
        
        prevTotal = theArrayData['3']*theArrayData['4'];
        
        if (id === value+'_removeRow') {
            
            
            total = total - prevTotal;
            var totalToString = ""+total;
        
        
            //document.getElementById("total").innerHTML = " "+comaSegregator(totalToString)
            
            $(this).closest('tr').remove ();
            $(this).remove(value+'_tr');   
            $('.'+arr+'_tr').remove()

            delete theArray[value];

        } else {

            
            $('#descrip2').val(theArrayData['1'])
            $('#unit2').val(theArrayData['2'])
            $('#price2').val(theArrayData['3'])
            $('#quantity2').val(theArrayData['4'])

            $('#addList2').val(value);
        
        }

    });


   function setErrorMsgToEmpty() {
        
        document.getElementById("errorde").innerHTML = "";
        document.getElementById("errorpr").innerHTML = "";
        document.getElementById("errorun").innerHTML = "";
        document.getElementById("errorqu").innerHTML = "";
    }


     function datenumconvert(input) {
             dataArr = input.split('-');

             output = '';

             switch(dataArr[1]){
                case '01':
                    output = 'Jan. '+dataArr[2]+', '+dataArr[0];
                    break;
                case '02':
                    output = 'Feb. '+dataArr[2]+', '+dataArr[0];
                    break;
                case '03':
                    output = 'Mar. '+dataArr[2]+', '+dataArr[0];
                    break;
                case '04':
                    output = 'Apr. '+dataArr[2]+', '+dataArr[0];
                    break;
                case '05':
                    output = 'May '+dataArr[2]+', '+dataArr[0];
                    break;
                case '06':
                    output = 'Jun. '+dataArr[2]+', '+dataArr[0];
                    break;
                case '07':
                    output = 'Jul '+dataArr[2]+', '+dataArr[0];
                    break;
                case '08':
                    output = 'Aug '+dataArr[2]+', '+dataArr[0];
                    break;
                case '09':
                    output = 'Sep. '+dataArr[2]+', '+dataArr[0];
                    break;  
                case '10':
                    output = 'Oct. '+dataArr[2]+', '+dataArr[0];
                    break;
                case '11':
                    output = 'Nov. '+dataArr[2]+', '+dataArr[0];
                    break;
                case '12':
                    output = 'Dec. '+dataArr[2]+', '+dataArr[0];
                    break;                                          
             }

             return output
         }    

    </script>


{% endblock %}


