{% extends baseSource %}
{% load staticfiles %}
{% load humanize %}

{% block content %}
        <!-- /. NAV SIDE  -->

          <!-- /. NAV SIDE  -->
        <div id="page-wrapper">


            <!--  ========================================================   -->

         
            <form id="theReqData" action="" method="POST">{% csrf_token %}
            <div class="panel-body" style="
                 margin-bottom: 0px;
                 padding-left: 15px;
                 font-size: 25px;
                 padding-top: 10px;
                 padding-bottom: 0px;
                 margin-top:50px; 

                ">
                <div>
                    Received Delivery  Transactions

                </div>
                 
               </div>
               </form>
            <div id="page-inner" style="margin-top:0px; background-color: #ddd!important;">
             
                <hr>
                 
                <div class="col-lg-12" style="display: none;">
                         <div class="panel panel-default">
                            
                            <div class="panel-body" style="padding:0px;padding-top:20px; ">
                                

                       <div class="col-lg-3 col-md-3">
                        <div class="panel panel-primary">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-xs-3">
                                        <i class="fa fa-shopping-cart fa-1x"></i>
                                    </div>
                                    <div class="col-xs-9 text-right">
                                        <div  style="display:inline;">Total</div>
                                       <div style="display:inline; margin-left:15px;"><span class="badge" style="font-size:15px;">{{pageData2.0.0}}</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3">
                        <div class="panel panel-primary">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-xs-3">
                                        <i class="fa icon-ok"></i>
                                    </div>
                                    <div class="col-xs-9 text-right">
                                        <div  style="display:inline;">Approved</div>
                                        <div style="display:inline; margin-left:15px;"><span class="badge" style="font-size:15px;">{{pageData2.0.1}}</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3">
                        <div class="panel panel-primary">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-xs-3">
                                        <i class="fa  icon-spinner"></i>
                                    </div>
                                    <div class="col-xs-9 text-right">
                                        <div  style="display:inline;">Pending</div>
                                        <div style="display:inline; margin-left:15px;"><span class="badge" style="font-size:15px;">{{pageData2.0.2}}</span></div>
                                    </div>
                                </div>
                            </div>
                          
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3">
                        <div class="panel panel-primary">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-xs-3">
                                        <i class="fa icon-exclamation-sign"></i>
                                    </div>
                                    <div class="col-xs-9 text-right">
                                    <div  style="display:inline;">Denied</div>
                                        <div style="display:inline; margin-left:15px;"><span class="badge" style="font-size:15px;">{{pageData2.0.3}}</span></div>
                                    </div>
                                </div>
                            </div>
                           
                        </div>
                    </div>


                                
                            </div>
                        </div>
                    </div>
                <div class="col-lg-12" style="display:none;">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            {% for cc in pageData1 %}
                            <p> {{cc}}</p>
                            {% endfor %}


                        </div>
                    </div>
                </div>   
                
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-body" style="background-color: #fff">
                           <button class="btn btn-info" style="border:2px solid #bbb; width: 180px; border-radius: 15px; outline: none">View List By I.A.R.</button>
                           <a href="/inventory_office/receive/by_po">
                               <button class="btn btn-default" style="border:2px solid #bbb;width: 180px; border-radius: 15px; outline: none">View List By P.O.</button>
                           </a>
                           <a href="/inventory_office/add_receive_existing/">
                               <button class="btn btn-success" style="float:right;border:2px solid #bbb;width: 180px; border-radius: 15px; outline: none">Add Existing I.A.R.</button>
                           </a>
                           
                           
                        </div>
                    </div>
                </div>
                <div class="col-lg-12">
                    <div class="panel panel-default ">
                        <div class="panel-body " style="background-color: #ddd">
                            <div class="col-lg-4" style="padding:0px; float: right;">
                               <div class="form-group input-group"  style="padding:0px; margin:0px;">
                          
                           <input id="searchInput" type="text" autofocus class="form-control input-sm" placeholder="Search for Delivery">
                                                <span class="input-group-btn">
                                                    <button id="findSearch" class="btn btn-primary btn-sm" type="submit" name="search_button">
                                                        <i class="fa fa-search "></i>
                                                    </button>
                                                </span>
                                            </div>
                            </div>
                           
                        </div>
                    </div>
                </div>

                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-body" style="padding: 0px;">
                             <div class="table-responsive">
                                  <table class="table table-bordered" id="dataTables-example">
                                    <thead>
                                        <tr style="background: #555; color: white;">
                                        <th class="text-center">I.A.R. No.</th>
                                        <th class="text-center">Date Received</th>
                                        <th class="text-center">P.O. Reference</th>
                                        <th class="text-center">Supplier</th>
                                        <th class="text-center">Delivery Remarks</th>
                                        <th class="text-center">Delivery Value</th>
                                        <th class="text-center">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="dataTable">
                                            {% for x in pageData1 %}
                                                <tr >
                                                <td class="text-center">{{x.0.0}}</td>
                                                <td class="text-center">{{x.0.10}}</td>
                                                <td class="text-center">{{x.0.2}}</td>
                                                <td class="text-center">{{x.0.7}}</td>
                                                <td class="text-center">{{x.0.12}}</td>
                                                <td class="text-center">000,000,000</td>
                                                <td class="text-center">
                                                    <a href="/inventory_office/receive/po/{{x.2.0}}/{{x.2.1}}/details/"><button class="btn btn-sm btn-primary" style="border-radius: 15px; outline:none"><i class="icon-arrow-right"></i></button></a>
                                                    </td>
                                                </tr>

                                            {% endfor %}
                                    </tbody>
                                </table>
                            </div>


                        </div>
                    </div>
                </div>

<!-- -->


<!-- -->


                <!-- /. ROW  -->

                <div class="panel-body"  style="padding:0px;">
                   
               </div>


                </div>    

                



               <!--  ========================================================   -->



                    </div>

<!-- ========================================================================================================= -->

            
            </div>
            <!-- /. PAGE INNER  -->
        </div>
        <!-- /. PAGE WRAPPER  -->
    </div>
    <!-- /. WRAPPER  -->
   <div id="footer-sec">
       &copy; Mindanao State University <i class=" buttom-header-right">Equipement Inventory </i>  
    </div>

    <!-- /. FOOTER  -->
    <!-- SCRIPTS -AT THE BOTOM TO REDUCE THE LOAD TIME-->
    <!-- JQUERY SCRIPTS -->
    <script src="{% static 'assets/js/jquery-1.10.2.js' %}"></script>
    <!-- BOOTSTRAP SCRIPTS -->
    <script src="{% static 'assets/js/bootstrap.js' %}"></script>
    <!-- METISMENU SCRIPTS -->
    <script src="{% static 'assets/js/jquery.metisMenu.js' %}"></script>
    <!-- CUSTOM SCRIPTS -->
    <script src="{% static 'assets/js/custom.js' %}"></script>
    <!-- WIZARD SCRIPTS -->
   <script>
        $(document).ready(function () {

            if ('{{urlHead}}' == '/inventory_office_admin') {

           
            $('#all_items').attr('class','{{cssActiveMenu}}')
            $('#acctTop').attr('class', 'active-menu-top')
            $('#theAcctUL').attr('class','nav nav-second-level collapse in')
            
            $('#title').html('All Delivery Transactions')

            }
            
            else{

           
            $('#all_items').attr('class','{{cssActiveMenu}}')
            $('#delTop').attr('class', 'active-menu-top')
            $('#theDelUL').attr('class','nav nav-second-level collapse in')
            
            $('#title').html('All Delivery Transactions')

            }

            //document.body.scrollTop = 250; // For Chrome, Safari and Opera 
            //document.documentElement.scrollTop = 250; 
           
             });
    </script>

    
    <script type="text/javascript">
         
            var prevID;  
            var status = 'close'; 

            var currentToUpdate

            $('#theListTable').on('click', 'button', function (argument) {
                var id = this.id
                var arrData = id.split('_')

                currentToUpdate = arrData

                if (arrData[1] == 'dBTN') {

                    console.log(prevID)

                    $('#'+prevID+'_iarTR').removeAttr('style')
                    $('#'+prevID+'_dBTN').html('<i class="icon-arrow-down"></i>')
                    $('#'+prevID+'_dBTN').attr('class', 'btn-primary btn btn-sm')
                    $('.theTRData').attr('style', 'display:none')
                     //  

                    if (arrData[0] != prevID) {

                            
                            $('#'+arrData[0]+'_iarTR').attr('style', 'background-color: #3c763d; font-weight:bold; font-size:15px; color:white; padding-top:15px;')
                            $('#'+this.id).html('<i class="icon-remove"></i>')
                            $('#'+this.id).attr('class', 'btn- btn-danger btn-sm')
                           
                            $('#'+arrData[0]+'_trlist').show('500')   


                            prevID = arrData[0]


                            $('#'+arrData[0]+'_trlist').body.scrollTop = 0; // For Chrome, Safari and Opera 
                            $('#'+arrData[0]+'_trlist').documentElement.scrollTop = 0; 

                    }
                    else{

                        prevID = null;
                    }


                } else {
                    $('#updateModal').modal('toggle')
                }


               
            })

        $('#updateItemInfoBTN').click(function() {

          console.log(currentToUpdate[0]+" == "+currentToUpdate[1]+" == "+$('#brandInF').val()+" == "+$('#typeF').val())
            
            $.ajax({
                type: 'POST',
                url:'/inventory_office/updateItemAssetID/',
                data: {
                    
                    'iarNum':currentToUpdate[0],
                    'itemnum': currentToUpdate[1],
                    'brand': $('#brandInF').val(),
                    'model': $('#typeF').val(),
                    csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                   
                },

                    success: function(response) {
                        
                        alert("Done Update")
                        location.reload()
                    }

            });
        })    

        $('#findSearch').click(function () {
            findFromTable()
        })

        $('#searchInput').keyup(function () {
            
            findFromTable()
        })

        function findFromTable() {
          
          var input, filter, table, tr, td, i;
          
          input = document.getElementById("searchInput");
          filter = input.value.toUpperCase();
          table = document.getElementById("dataTable");
          
          tr = table.getElementsByTagName("tr");
          
          for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[0];
            td1 = tr[i].getElementsByTagName("td")[2];
            td2 = tr[i].getElementsByTagName("td")[3];
            if (td||td1||td2) {
              if (td.innerHTML.toUpperCase().indexOf(filter) > -1||td1.innerHTML.toUpperCase().indexOf(filter) > -1||td2.innerHTML.toUpperCase().indexOf(filter) > -1) {
                tr[i].style.display = "";

              } else {
                tr[i].style.display = "none";
              }
            }       
          }
        }


    </script>

{% endblock %}




