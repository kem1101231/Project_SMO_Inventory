{% extends baseSource %}
{% load staticfiles %}
{% load humanize %}
{% block content %}
    <style type="text/css">
        
        .test25{
            width: 100%;
            height: 100%;
        
        }
         

        .test25 img{
             
             
             max-height: 150px;
             
         }
         .dataFont3{
            
            font-size: 15px; 
            font-weight: bold; 
        
         }

         .dataFont4{
            
            font-weight: 450;  
            font-size: 15px;
         }
                 .test25{
            width: 100%;
            height: 100%;
        
        }
         

         .dataFont1{
            
            font-size: 15px; 
            font-weight: bold; 
            padding:7px; 
            margin-bottom:2px;
        
         }

         .dataFont2{
            
            font-weight: 450;  
            font-size: 15px;
            padding:7px; 
            margin-bottom:2px;

 </style>
        <!-- /. NAV SIDE  -->
        <div id="page-wrapper">
        <div style="   
                                     display:inline;
                                     float:right; 
                                     right:0; 
                                     padding-top:0px;
                                     margin-top:70px; 
                                     margin-bottom: 0px;
                                     padding-bottom: 0px;
                                     padding-right:20px;
                                    
                                    ">

                                        
                     <div >
                                <button class="btn btn-success" role ="button" aria-disabled="true" id="tranBTN" name="approveButton" value="{{pageData1.0.1}}">Tranfer P.A.R.</button>
                                
                            
                      </div>
                       
                       
                                    </div>
            <form id="theReqData" action="" method="POST">{% csrf_token %}
            <div class="panel-body" style="
                 margin-bottom: 0px;
                 padding-left: 15px;
                 font-size: 25px;
                 padding-top: 10px; 
                 padding-bottom: 0px;
                 margin-top:70px; 

                ">
                <div>
                 <span name="reqNum" id="reqNum" value="{{pageData1.0.0}}">Property Acceptance Receipt ( No. {{pageData1.0.0}})</span>
                </div>
                 
               </div>
               </form>
            <div id="page-inner" style="margin-top:0px; background-color: #ddd!important;">
             
                <hr>
                 


                 
                <div class="col-lg-6" style="">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title">Basic Information</h3>
                            </div><!-- height:590px;-->
                            <div class="panel-body" style="height: 260px; padding-left:20px;">
                            
                            <div class="form-group">
                                <div style="padding-left: 2px; width:100%; ">
                                    <div class=" dataFont2 col-lg-5" >
                                        End User:  
                                    </div>
                                    <div class="dataFont1 col-lg-6" >
                                         {{pageData1.1.6}} {{pageData1.1.1}} {{pageData1.1.7}} {{pageData1.1.2}} {{pageData1.1.8}} 
                                    </div>
                                </div> 
                            </div>
                         
                              <div class="form-group">
                                <div style="padding-left: 2px; width:100%; ">
                                    <div class=" dataFont2 col-lg-5" >
                                        Office:  
                                    </div>
                                    <div class="dataFont1 col-lg-7" >
                                       {{pageData1.2.1}} 
                                    </div>
                                </div> 
                            </div>
                            
                            
                           
                            <div class="form-group">
                                <div style="padding-left: 2px; width:100%; ">
                                    <div class=" dataFont2 col-lg-5" >
                                        Date Received:  
                                    </div>
                                    <div class="dataFont1 col-lg-6" >
                                          {{pageData1.0.3}} 
                                    </div>
                                </div> 
                            </div>
                            
                           <div class="form-group">
                                <div style="padding-left: 2px; width:100%; ">
                                    <div class=" dataFont2 col-lg-5" >
                                        Total Value Cost:  
                                    </div>
                                    <div class="dataFont1 col-lg-6" >
                                     {{pageData1.5.0|floatformat|intcomma}} 
                                    </div>
                                </div> 
                            </div>
                            
                             
                            </div>
                        </div>
                    </div>
                    
                   
                    <div class="col-lg-6" style=" padding-left:0px;">
                         <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title">References Information</h3>
                            </div>
                            <div class="panel-body" style=" height:260px;  padding-left:20px;">
                            
                           <div class="form-group">
                                <div style="padding-left: 2px; width:100%; ">
                                    <div class=" dataFont2 col-lg-5" >
                                       P.O. Reference:  
                                    </div>
                                    <div class="dataFont1 col-lg-6" >
                                       {{pageData1.0.6}} 
                                    </div>
                                </div> 
                            </div>
                             <div class="form-group">
                                <div style="padding-left: 2px; width:100%; ">
                                    <div class=" dataFont2 col-lg-5" >
                                       P.O. Funding:  
                                    </div>
                                    <div class="dataFont1 col-lg-6" >
                                       000-000-000
                                    </div>
                                </div> 
                            </div>
                            <div class="form-group">
                                <div style="padding-left: 2px; width:100%; ">
                                    <div class=" dataFont2 col-lg-5" >
                                        I.A.R. Reference :  
                                    </div>
                                    <div class="dataFont1 col-lg-6" >
                                        {{pageData1.0.9}} 0
                                    </div>
                                </div> 
                            </div>
                            <div class="form-group">
                                <div style="padding-left: 2px; width:100%; ">
                                    <div class=" dataFont2 col-lg-5" >
                                        Date Received:  
                                    </div>
                                    <div class="dataFont1 col-lg-6" >
                                       {{pageData1.3.10}}
                                    </div>
                                </div> 
                            </div>
                            <div class="form-group">
                                <div style="padding-left: 2px; width:100%; ">
                                    <div class=" dataFont2 col-lg-5" >
                                       Invoice:  
                                    </div>
                                    <div class="dataFont1 col-lg-6" >
                                        {{pageData1.3.5}}
                                    </div>
                                </div> 
                            </div>
                            <div class="form-group">
                                <div style="padding-left: 2px; width:100%; ">
                                    <div class=" dataFont2 col-lg-5" >
                                       Invoice Date:  
                                    </div>
                                    <div class="dataFont1 col-lg-6" >
                                        {{pageData1.3.6}}
                                    </div>
                                </div> 
                            </div>
                            
                               <div class="form-group">
                                <div style="padding-left: 2px; width:100%;">
                                    <div class=" dataFont2 col-lg-5" >
                                        Supplier:  
                                    </div>
                                    <div class="dataFont1 col-lg-6" >
                                       {{pageData1.4.18}}
                                    </div>
                                </div> 
                            </div>
                            
                         
                                
                            </div>
                        </div>
                    </div>

                 <div class="col-lg-12">
                     <div class="panel panel-default">
                         <div class="panel-body text-right">
                             <button class="btn btn-success">Create WMR</button>
                         </div>
                     </div>
                 </div>   
                  
                 <div class="col-lg-12" style="display: inline; display: none">
                    
                       

                        <!--  -->
                        
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title">Items Included on PAR</h3>
                            </div>
                            <div class="panel-body">
                                <div class="table-responsive">
                                  <table class="table table-striped table-bordered table-hover" id="theTable">
                                    <thead>
                                        <tr>
                                            <th>Description</th>
                                            <th class="text-right" style="width:120px; display: none">Quantity</th>
                                            <th class="text-center" style="width:120px;">Unit</th>
                                            <th class="text-right" style="width:120px;">Unit Price</th>
                                            <th class="text-right" style="width:120px; display: none">Total Cost</th>
                                            <th class="text-center" style="width:180px;">Unique ID</th>
                                            <th class="text-center" style="width:120px;">Inven. No.</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for x in pageData2 %}
                                            
                                            <tr>
                                               <td>
                                                {% if x.2.10 != 'multi' %}
                                                    {% for xx in x.2 %}
                                                    <p>{{xx}}</p>
                                                    {% endfor %}
                                                {% else %}
                                                {{x.2}}
                                                {% endif %}

                                               </td>
                                               <td class="text-right" style="display: none">000</td>
                                               <td class="text-center">{{x.3}}</td>
                                               <td class="text-right">{{x.4|floatformat|intcomma}}</td>     
                                               <td class="text-right" style="display: none">{{x.9}}</td> 
                                               <td class="text-center">{{x.8}}</td> 
                                               <td class="text-center">{{x.0}}</td> 
                                            </tr>
                                        
                                        {% endfor %}

                                  
                                    </tbody>
                                </table>
                            </div>
                                
                            </div>
                        </div>
                    
                    <!-- -->

                </div>
       <div class="col-lg-12" style="display: inline;display:none">
                    
                       

                        <!--  -->
                        
                        <div class="panel panel-default">
                            
                            <div class="panel-body">
                               
                                        {% for x in pageData3 %}
                                            
                                            <p>
                                                {% for xx in x %}
                                                {{xx}}
                                                <p></p>
                                                {% endfor%}
                                            </p>
                                        {% endfor %}

                                  
                                    
                            </div>
                                
                            </div>
                      
                    
                    <!-- -->

                </div>

                       <div class="col-lg-12" style="display: inline;">
                    
                       

                        <!--  -->
                        
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title">Items Included on PAR</h3>
                            </div>
                            <div class="panel-body">
                                <div class="table-responsive">
                                  <table class="table table-striped table-bordered table-hover" id="theTable">
                                    <thead>
                                        <tr>
                                            <th class="text-center" style="width:50px;">No.</th>
                                            <th>Description</th>
                                            <th class="text-center" style="width:60px;">Qty.</th>
                                            <th class="text-center" style="width:80px;">Unit</th>
                                            <th class="text-right" style="width:95px;">Unit Price</th>
                                            <th class="text-right" style="width:120px; ">Total Cost</th>
                                            <th class="text-center" style="width:90px;">Inven. No.</th>
                                            <th class="text-center" style="width:150px;">Serial Num.</th>
                                            <th class="text-center" style="width:90px;">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for x in pageData3 %}
                                            
                                            <tr>
                                               <td rowspan="{{x.1}}" class="text-center">{{x.3}}</td>
                                               <td rowspan="{{x.1}}">
                                               
                                               
                                                
                                               {% if x.0.0 == '1' %}
                                                  {{x.0.1.0}}  
                                               {% else %}
                                                    {% for xx in x.0.1.0 %}
                                                            <p>{{xx}}</p>
                                                    {% endfor %}
                                               
                                               {% endif %}

                                               </td>
                                               <td rowspan="{{x.1}}" class="text-center" style="">{{x.0.1.4|floatformat|intcomma}}</td>
                                               <td rowspan="{{x.1}}" class="text-center">{{x.0.1.1}}</td>
                                               <td rowspan="{{x.1}}" class="text-right">{{x.0.1.2|floatformat|intcomma}}</td>  
                                               <td rowspan="{{x.1}}" class="text-right">{{x.0.1.5|floatformat|intcomma}}</td>

                                               {% for xx in x.2 %}

                                               {% if xx == x.2.0 %}
                                               <td class="text-right" >{{xx.0}}</td> 
                                               <td class="text-center">{{xx.2}}</td> 
                                               <td class="text-center">{{xx.1}}</td> 
                                                   </tr>
                                               {% else %}
                                               <tr>
                                                <td class="text-right" >{{xx.0}}</td> 
                                               <td class="text-center">{{xx.2}}</td> 
                                               <td class="text-center">{{xx.1}}</td> 
                                                </tr>
                                               
                                               {% endif %}

                                               {% endfor %}

                                               
                                        
                                        
                                        {% endfor %}

                                  
                                    </tbody>
                                </table>
                            </div>
                                
                            </div>
                        </div>
                    
                    <!-- -->

                </div>
                <!-- /. ROW  -->
                

                <div class="panel-body"  style="padding:0px;">
                    

               </div>


                </div>    

                </div>


            <!-- /. PAGE INNER  -->
        </div>
        <!-- /. PAGE WRAPPER  -->

        <!-- ===================================================   Modal ==================================================================================  -->
           
                       <div class="modal fade" id="newReg" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button id="newRegClose2" type="submit" style="float: right; color: #d43f3a; border-color: #d43f3a; background: white; border-radius: 20px;" class="btn btn-sm btn-danger" ><i class="icon-remove"></i></button>
                                      
                                            <h4 class="modal-title" id="H4"> Tranfer P.A.R. to another personnel</h4>
                                    </div>
                                    
                                    <div class="modal-body">
                                        <div class="panel panel-body" style="padding-top:0px; margin:0px;">
                                            <div class="form-group">
                                                    <label style="margin-top:5px;" for="text1" class="control-label col-lg-4">Transfer Account to: </label>
                                            
                                                    <div class="col-lg-8">
                                                        <input type="text" id="receiveoff" placeholder="Name of the presonnel" list="recOffList"  class="form-control ui1">
                                                        <datalist id="recOffList">
                                                        </datalist>
                                                    </div>
                                                </div>
                                        </div>
                                    </div>
                                        
                                    <div class="modal-footer">
                                           
                                            <button id="transPARBTN" type="submit" class="btn btn-success" >Tranfer</button>
                                            

                                    </div>
                                </div>
                            </div>
                        </div>

<!-- ===================================================   Modal ==================================================================================  -->




    </div>
    <div id="footer-sec">
       &copy; Mindanao State University - General Santos City
    </div>

    <!-- /. FOOTER  -->
    <!-- SCRIPTS -AT THE BOTOM TO REDUCE THE LOAD TIME-->
    <!-- JQUERY SCRIPTS -->
    <script src="{% static 'assets/js/jquery-1.10.2.js' %}"></script>
    <!-- BOOTSTRAP SCRIPTS -->
    <script src="{% static 'assets/js/bootstrap.js' %}"></script>
    <!-- METISMENU SCRIPTS -->
    <script src="{% static 'assets/js/jquery.metisMenu.js' %}"></script>
    <!-- CUSTOM SCRIPTS -->
    <script src="{% static 'assets/js/custom.js' %}"></script>
    <!-- WIZARD SCRIPTS -->
    <script src="{% static 'assets/plugins/morris/raphael-2.1.0.min.js' %}"></script>
    <script src="{% static 'assets/plugins/morris/morris.js' %}"></script>


   <script>
        
        var receiveoffID;

        $(document).ready(function () {

            $('#par').attr('class','{{cssActiveMenu}}')
            $('#acctTop').attr('class', 'active-menu-top')
            $('#theAcctUL').attr('class','nav nav-second-level collapse in')
            $('#title').html('Property Acceptance Receipt')

        });

        $('#tranBTN').click(function (argument) {
            $('#newReg').modal('toggle')
        })

        $('#newRegClose2').click(function(e) {
            document.getElementById("receiveoff").value = "";
           
            $('#newReg').modal('toggle');
        })
        
        $('#receiveoff').keyup(function(e){
                e.preventDefault();
                   
                    $.ajax({
                        type: 'POST',
                        url:'/procurement_office/getEmployeeData/',
                        data:{
                            
                            'inputName': document.getElementById("receiveoff").value,
                             csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                           
                        },

                            success: function(response) {

                                document.getElementById("recOffList").innerHTML = ""
                                
                                for(var key in response) {
                                   
                                    var value = response[key];
                                    document.getElementById("recOffList").innerHTML += '<option id="'+key+'" value ="'+value['name']+'"/>'

                                }

                            }

                    });
        });


        $("#receiveoff").on('input', function () {
               
                var val = this.value;
                var id = $('#recOffList option[value="' + val +'"]').attr('id');
                
                receiveoffID = id

        }); 

        $('#transPARBTN').click(function(e) {
            
            alert(receiveoffID)
            
            e.preventDefault();
                   
                    $.ajax({
                        type: 'POST',
                        url:'/inventory_office/transferPAR/',
                        data:{
                            
                            'offid': receiveoffID,
                            'parNum': $('#reqNum').attr('value'),
                             csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                           
                        },

                        success: function(response) {

                            alert("Tranfer complete")

                        }
                    });
        })

    </script>

{% endblock %}